{"version":3,"file":"shopify-gid.js","sources":["../index.js"],"sourcesContent":["export function decode (str) {\n  const raw = (typeof window === 'undefined' ? (\n    Buffer.from(str, 'base64').toString('utf-8')\n  ) : (\n    atob(str) // eslint-disable-line no-undef\n  )).split('shopify/')[1]\n\n  const [ type, id ] = raw.split('/')\n\n  const params = (id.split('?').slice(1)[0] || '').split('&').reduce((p, q) => {\n    const [ key, value ] = q.split('=')\n    p[key] = value\n    return p\n  }, {})\n\n  return {\n    type,\n    id: id.split('?')[0],\n    params,\n    raw: str\n  }\n}\n\nexport function encode (type, id, params = {}) {\n  let full = `gid://shopify/${type}/${id}`\n\n  let query = []\n  const keys = Object.keys(params)\n\n  if (keys.length > 0) {\n    for (let i = 0; i < keys.length; i++) {\n      query.push(keys[i] + '=' + params[keys[i]])\n    }\n\n    query = '?' + query.join('&')\n\n    full += query\n  }\n\n  return typeof window === 'undefined' ? (\n    Buffer.from(full, 'utf-8').toString('base64')\n  ) : (\n    btoa(full) // eslint-disable-line no-undef\n  )\n}\n"],"names":["str","const","window","Buffer","from","toString","atob","split","type","id","params","slice","reduce","p","q","raw","let","full","query","keys","Object","length","i","push","join","btoa"],"mappings":"eAAO,SAAiBA,GACtBC,OAA+B,oBAAXC,OAClBC,OAAOC,KAAKJ,EAAK,UAAUK,SAAS,SAEpCC,KAAKN,IACJO,MAAM,YAAY,GAEIA,MAAM,KAAvBC,OAAMC,OAERC,GAAUD,EAAGF,MAAM,KAAKI,MAAM,GAAG,IAAM,IAAIJ,MAAM,KAAKK,gBAAQC,EAAGC,GACrE,MAAuBA,EAAEP,MAAM,KAE/B,OADAM,aACOA,OAGT,YACEL,EACAC,GAAIA,EAAGF,MAAM,KAAK,UAClBG,EACAK,IAAKf,mBAIT,SAAwBQ,EAAMC,EAAIC,sBAChCM,IAAIC,EAAO,iBAAiBT,MAAQC,EAEhCS,KACEC,EAAOC,OAAOD,KAAKT,GAEzB,GAAIS,EAAKE,OAAS,EAAG,CACnB,IAAKL,IAAIM,EAAI,EAAGA,EAAIH,EAAKE,OAAQC,IAC/BJ,EAAMK,KAAKJ,EAAKG,GAAK,IAAMZ,EAAOS,EAAKG,KAKzCL,GAFAC,EAAQ,IAAMA,EAAMM,KAAK,KAK3B,MAAyB,oBAAXtB,OACZC,OAAOC,KAAKa,EAAM,SAASZ,SAAS,UAEpCoB,KAAKR"}