{"version":3,"file":"picostate-react.umd.js","sources":["../Context.js","../Provider.js","../Connect.js","../Hook.js"],"sourcesContent":["import React from 'react'\n\nexport const Context = React.createContext({})\nexport const Provider = Context.Provider\nexport const Consumer = Context.Consumer\n","import React from 'react'\nimport { Provider as ContextProvider } from './Context.js'\n\nexport class Picostate extends React.Component {\n  constructor (props) {\n    super(props)\n\n    if (!props.store) {\n      throw new Error('@picostate/react was not provided with a picostate store')\n    }\n\n    props.store.listen(this.setState.bind(this))\n  }\n\n  render () {\n    const { store, children } = this.props\n\n    return (\n      <ContextProvider value={{ store }}>\n        {children}\n      </ContextProvider>\n    )\n  }\n}\n","import React from 'react'\nimport { Consumer } from './Context.js'\n\nexport function connect (mapStateToProps, actions) {\n  if (typeof mapStateToProps === 'object') {\n    actions = mapStateToProps\n    mapStateToProps = undefined\n  }\n\n  return function wrapComponentWithState (Component) {\n    return props => (\n      <Consumer>\n        {({ store }) => {\n          const wrappedActions = Object.keys(actions || {}).reduce((obj, key) => {\n            obj[key] = (...args) => actions[key](store.hydrate.bind(store), ...args)\n            return obj\n          }, {})\n\n          return (\n            <Component {...Object.assign(\n              {},\n              props,\n              mapStateToProps ? mapStateToProps(store.state, props) : {},\n              wrappedActions,\n              { hydrate: store.hydrate.bind(store) }\n            )} />\n          )\n        }}\n      </Consumer>\n    )\n  }\n}\n","import React, { useState, useContext } from 'react'\nimport { Context } from './Context.js'\n\nexport function usePicostate (mapStateToProps, actions) {\n  if (typeof mapStateToProps === 'object') {\n    actions = mapStateToProps\n    mapStateToProps = undefined\n  }\n\n  const { store } = useContext(Context)\n\n  const wrappedActions = Object.keys(actions || {}).reduce((obj, key) => {\n    obj[key] = (...args) => actions[key](store.hydrate.bind(store), ...args)\n    return obj\n  }, {})\n\n  return [\n    mapStateToProps ? mapStateToProps(store.state) : store.state,\n    wrappedActions\n  ]\n}\n"],"names":["Context","React","createContext","Provider","Consumer","constructor","props","store","Error","listen","this","setState","bind","render","ContextProvider","value","Component","mapStateToProps","actions","undefined","ref","wrappedActions","Object","keys","reduce","obj","key","hydrate","args","assign","state","useContext"],"mappings":"8OAEaA,EAAUC,EAAMC,cAAc,IAC9BC,EAAWH,EAAQG,SACnBC,EAAWJ,EAAQI,iCCA9BC,WAAaC,kBACLA,IAEDA,EAAMC,YACH,IAAIC,MAAM,4DAGlBF,EAAMC,MAAME,OAAOC,KAAKC,SAASC,KAAKF,uGAGxCG,wBAC8BH,KAAKJ,aAG/BL,gBAACa,GAAgBC,MAAO,iCAfCd,EAAMe,qBCA9B,SAAkBC,EAAiBC,SACT,iBAApBD,IACTC,EAAUD,EACVA,OAAkBE,GAGb,SAAiCH,mBAC/BV,UACLL,gBAACG,OACC,SAAEgB,iBACMC,EAAiBC,OAAOC,KAAKL,GAAW,IAAIM,gBAAQC,EAAKC,UAC7DD,EAAIC,4EAAoBR,EAAQQ,YAAKnB,EAAMoB,QAAQf,KAAKL,WAAWqB,KAC5DH,GACN,WAGDxB,gBAACe,EAAUM,OAAWO,OACpB,GACAvB,EACAW,EAAkBA,EAAgBV,EAAMuB,MAAOxB,GAAS,GACxDe,EACA,CAAEM,QAASpB,EAAMoB,QAAQf,KAAKL,0BCrBrC,SAAuBU,EAAiBC,GACd,iBAApBD,IACTC,EAAUD,EACVA,OAAkBE,SAGFY,aAAW/B,SAEvBqB,EAAiBC,OAAOC,KAAKL,GAAW,IAAIM,gBAAQC,EAAKC,UAC7DD,EAAIC,4EAAoBR,EAAQQ,YAAKnB,EAAMoB,QAAQf,KAAKL,WAAWqB,KAC5DH,GACN,UAEI,CACLR,EAAkBA,EAAgBV,EAAMuB,OAASvB,EAAMuB,MACvDT"}