{"version":3,"file":"picostate.umd.js","sources":["../index.js"],"sourcesContent":["export default function createStore (initialState = {}) {\n  let state = Object.assign({}, initialState)\n  let listeners = new Map()\n\n  return {\n    get state () {\n      return Object.assign({}, state || initialState)\n    },\n    hydrate (fn) {\n      state = fn ? Object.assign(this.state, typeof fn === 'function' ? fn(this.state) : fn) : fn\n\n      return done => {\n        const s = this.state\n        listeners.forEach(([ fn, once ]) => {\n          fn(s)\n          once && listeners.delete(fn)\n        })\n        done && done(s)\n      }\n    },\n    listen (fn, once) {\n      !listeners.has(fn) && listeners.set(fn, [fn, once])\n      return () => listeners.delete(fn)\n    }\n  }\n}\n"],"names":["initialState","state","Object","assign","listeners","Map","hydrate","fn","this","done","s","forEach","ref","once","delete","listen","has","set"],"mappings":"+KAAe,SAAsBA,kBAAe,QAC9CC,EAAQC,OAAOC,OAAO,GAAIH,GAC1BI,EAAY,IAAIC,UAEb,oBAEIH,OAAOC,OAAO,GAAIF,GAASD,IAEpCM,iBAASC,qBACPN,EAAQM,EAAKL,OAAOC,OAAOK,KAAKP,MAAqB,mBAAPM,EAAoBA,EAAGC,KAAKP,OAASM,GAAMA,WAElFE,OACCC,EAAIF,EAAKP,MACfG,EAAUO,iBAASC,qBACjBL,EAAGG,GACHG,GAAQT,EAAUU,OAAOP,KAE3BE,GAAQA,EAAKC,KAGjBK,gBAAQR,EAAIM,UACTT,EAAUY,IAAIT,IAAOH,EAAUa,IAAIV,EAAI,CAACA,EAAIM,sBAChCT,EAAUU,OAAOP"}