{"version":3,"sources":["webpack:///./node_modules/await-timeout/src/index.js","webpack:///./node_modules/gatsby/dist/internal-plugins/bundle-optimisations/polyfills/fetch.js","webpack:///./node_modules/password-validator/src/lib.js","webpack:///./node_modules/await-timeout/src/utils.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/password-validator/src/constants.js","webpack:///./node_modules/password-validator/src/index.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./src/components/auth/authWrapper.tsx","webpack:///./src/utils/schema.tsx","webpack:///./src/components/auth/activate.tsx","webpack:///./src/utils/error.tsx","webpack:///./src/components/auth/forgotPassword.tsx","webpack:///./src/utils/updateCustomer.tsx","webpack:///./src/components/auth/register.tsx","webpack:///./src/components/auth/login.tsx","webpack:///./src/components/auth/reset.tsx","webpack:///./src/components/auth/invalid_token.tsx","webpack:///./node_modules/spacetime/builds/spacetime.mjs","webpack:///./src/components/auth/orders.tsx","webpack:///./src/components/auth/portal.tsx","webpack:///./src/pages/account.tsx"],"names":["_classCallCheck","_createClass","_require","promiseFinally","toError","module","exports","Timeout","this","_id","_delay","key","value","delay","rejectReason","set","promise","wrap","_this","arguments","length","undefined","Promise","resolve","reject","clear","fn","setTimeout","_this2","wrappedPromise","timer","race","clearTimeout","get","global","fetch","regex","_process","regexp","repeat","parsedRepeat","parseInt","RegExp","test","password","positive","not","symbol","call","has","is","min","num","max","digits","letters","uppercase","characterIndex","upperCaseLetters","currentLetter","charAt","toLowerCase","lowercase","lowerCaseLetters","toUpperCase","symbols","spaces","oneOf","list","indexOf","then","result","e","Error","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","Constructor","protoProps","staticProps","prototype","error","lib","_validateLength","len","Number","isNaN","isInteger","_isPasswordValidFor","property","method","apply","_register","func","args","properties","push","PasswordValidator","pwd","options","Boolean","String","reduce","errorList","concat","every","bind","count","instance","TypeError","AuthWrapper","Component","component","path","rest","useState","ready","setReady","useEffect","cookie","navigate","PasswordSchema","Activate","passwordField1","setPasswordField1","passwordField2","setPasswordField2","attempts","setAttempts","verifyAccount","useCallback","a","validate","body","id","encode","input","activationToken","token","JSON","stringify","res","json","ok","useDeferredLoads","load","isReloading","isPending","title","className","message","cx","type","onChange","placeholder","onClick","to","ErrorHandling","role","aria-label","ForgotPassword","formSuccess","setFormSuccess","form","React","createRef","handleForgot","email","useLoads","defer","isRejected","onSubmit","preventDefault","current","elements","handleSubmit","ref","htmlFor","name","required","UpdateCustomer","console","log","expires","customer","firstName","Register","handleRegister","lastName","Login","updateCustomerInState","setCustomerInState","handleLogin","Reset","submit","setSubmitting","setFormSucces","handleReset","resetToken","InvalidToken","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","from","_unsupportedIterableToArray","_nonIterableRest","arr2","toUtc","dstChange","offset","year","_dstChange$split2","split","month","_rest$split2","day","hour","Date","UTC","summerTime","epoch","start","end","summerOffset","winterOffset","getUTCFullYear","startUtc","endUtc","quick","s","obj","timezones","tz","warn","dst","jul","dec","hem","_prefixes","data","freeze","__proto__","keys","forEach","k","str","replace","before","unpack","isOffset","isNumber","utcOffset","gmtOffset","toIana","parseOffset_1","m","match","local","timezone","Intl","DateTimeFormat","format","resolvedOptions","timeZone","safeIntl","guessTz_1","cities","h","city","find","zones","trim","hasOwnProperty","normalize","millisecond","date","week","milliseconds","walk","unit","previous","d","startUnit","original","diff","Math","abs","halfStep","units","valid","walkTo","getMonth","getFullYear","minute","second","seconds","walk_1","wants","old","clone","silent","shortMonths","longMonths","months","sep","buildMapping","i18n","parseOffset_1$1","parseFloat","parseTime_1","startOf","substring","ampm","_h","monthLengths_1","fns","createCommonjsModule","isLeapYear","isDate","valueOf","isObject","zeroPad","pad","join","titleCase","substr","ordinal","j","toCardinal","getEpoch","tmp","getTime","beADate","formatTimezone","delimiter","sign","absOffset","hours","minutes","hasDate_1","months$1","parseYear","today","strParse","reg","parse","givenTz","british","_today","quarter","season","getDate","getNow","now","dates","tonight","tomorrow","add","yesterday","subtract","christmas","namedDates","defaults","handleObject","assign","isValid","order","handleArray","_res","shortDays","longDays","days","aliases","tues","thur","thurs","_offset","dayName","monthName","isNegative","time","hour24","hour12","era","numeric","iso","h24","ms","toISOString","nice","mdy","dmy","ymd","format_1","out","sections","_","fmt","mapping","G","GG","GGG","GGGG","y","yy","yyy","yyyy","yyyyy","Q","QQ","QQQ","QQQQ","M","MM","MMM","MMMM","w","ww","dd","D","dayOfYear","DD","DDD","E","EE","EEE","EEEE","EEEEE","ee","eee","eeee","eeeee","aa","aaa","aaaa","h12","hh","H","HH","mm","ss","A","z","zz","zzz","zzzz","Z","ZZ","ZZZ","ZZZZ","addAlias","_char","toName","unixFmt_1","chars","quoteOn","txt","c","units$1","doUnit","duration","endOf","percent","toFixed","progress_1","nearest_1","prog","progress","climb","b","isBefore","isAfter","one","waterfall","msDiff","years","fastYear","weeks","diff$1","reversed","reverseDiff","qualifiers","almost","over","pluralize","since_1","rounded","qualified","precise","later","earlier","isSame","u","getDiff","englishValues","englishValue","nextUnit","nextValue","splice","seasons","north","south","quarters","units$2","quarterhour","_weekStart","q","hemisphere","decade","century","startOf_1","isDay","every_1","timezone_1","epochShift","found","hasDst","default_offset","change","back","summer","winter","isDST","units$3","methods","input$1","hasDST","unixFmt","leapYear","nearest","since","last","isAwake","isAsleep","logYear","debug","fromNow","weekStart","inDST","round","each","methods_1","isLeapYear$1","want","shift","sec","_01Time","getMilliseconds","getSeconds","getMinutes","getHours","hourFloat","_minute","_hour","which","dayTime","times","morning","breakfast","noon","lunch","afternoon","evening","dinner","night","midnight","_02Date","getDay","clearMinutes","_03Year","sum","setDate","setFullYear","setHours","setMinutes","setMonth","toAdd","minus","thisOne","skipWeeks","_month","floor","millenium","methods$4","query","Space","isLeapYear$2","getMonthLength","_model","_years","order$1","keep","dstAwareUnits","keepDate","SpaceTime","_sum","wantYear","haveYear","plus","print","same","tzAware","compare","isEqual","isBetween","isInclusive","startEpoch","endEpoch","getTimezoneOffset","toLocalDate","spacetime","whereIts_1","startHour","endHour","filter","main$1","setToday","extend","whereIts","version","plugin","Orders","customerToken","useStore","orders","setOrders","handleOrders","edges","map","node","orderNumber","processedAt","totalPrice","href","statusUrl","rel","Portal","updateCustomer","accessToken","remove","logout","PublicRoute","children","Account","pageContext"],"mappings":"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","file":"component---src-pages-account-tsx-93a49dc57cc8fb853ffb.js","sourcesContent":["var _classCallCheck = require(\"C:/Sites/idlehoursco/animated-fortnight/web/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Sites/idlehoursco/animated-fortnight/web/node_modules/@babel/runtime/helpers/createClass\");\n\n/**\n * Promise-based replacement for setTimeout / clearTimeout.\n */\nvar _require = require('./utils'),\n    promiseFinally = _require.promiseFinally,\n    toError = _require.toError;\n\nmodule.exports = /*#__PURE__*/function () {\n  \"use strict\";\n\n  _createClass(Timeout, null, [{\n    key: \"set\",\n    value: function set(delay, rejectReason) {\n      return new Timeout().set(delay, rejectReason);\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(promise, delay, rejectReason) {\n      return new Timeout().wrap(promise, delay, rejectReason);\n    }\n  }]);\n\n  function Timeout() {\n    _classCallCheck(this, Timeout);\n\n    this._id = null;\n    this._delay = null;\n  }\n\n  _createClass(Timeout, [{\n    key: \"set\",\n    value: function set(delay) {\n      var _this = this;\n\n      var rejectReason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return new Promise(function (resolve, reject) {\n        _this.clear();\n\n        var fn = rejectReason ? function () {\n          return reject(toError(rejectReason));\n        } : resolve;\n        _this._id = setTimeout(fn, delay);\n        _this._delay = delay;\n      });\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(promise, delay) {\n      var _this2 = this;\n\n      var rejectReason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var wrappedPromise = promiseFinally(promise, function () {\n        return _this2.clear();\n      });\n      var timer = this.set(delay, rejectReason);\n      return Promise.race([wrappedPromise, timer]);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (this._id) {\n        clearTimeout(this._id);\n      }\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    }\n  }, {\n    key: \"delay\",\n    get: function get() {\n      return this._delay;\n    }\n  }]);\n\n  return Timeout;\n}();","\"use strict\";\n\nmodule.exports = global.fetch;","/**\n * Generic method to test regex\n *\n * @private\n * @param {string} regex - regex to test\n *                           with password\n */\nvar regex = require('./constants').regex;\n\nfunction _process(regexp, repeat) {\n  if (repeat && repeat > 1) {\n    var parsedRepeat = parseInt(repeat, 10);\n    return new RegExp(regexp + '{' + parsedRepeat + ',}').test(this.password) === this.positive;\n  }\n\n  return new RegExp(regexp).test(this.password) === this.positive;\n}\n\nmodule.exports = {\n  /**\n   * Method to invert the next validations\n   *\n   * @param {RegExp} [symbol] - custom Regex which should not be present\n   */\n  not: function not(symbol) {\n    this.positive = false;\n\n    if (symbol) {\n      return _process.call(this, symbol);\n    }\n\n    return true;\n  },\n\n  /**\n   * Method to invert the effects of not()\n   *\n   * @param {RegExp} [symbol] - custom Regex which should be present\n   */\n  has: function has(symbol) {\n    this.positive = true;\n\n    if (symbol) {\n      return _process.call(this, symbol);\n    }\n\n    return true;\n  },\n\n  /**\n   * Method to invert the effects of not() and\n   * to make the api readable and chainable\n   *\n   */\n  is: function is() {\n    this.positive = true;\n    return true;\n  },\n\n  /**\n   * Method to specify a minimum length\n   *\n   * @param {number} num - minimum length\n   */\n  min: function min(num) {\n    return this.password.length >= num;\n  },\n\n  /**\n   * Method to specify a maximum length\n   *\n   * @param {number} num - maximum length\n   */\n  max: function max(num) {\n    return this.password.length <= num;\n  },\n\n  /**\n   * Method to validate the presence of digits\n   *\n   * @param {number} repeat - count of required digits\n   */\n  digits: function digits(repeat) {\n    return _process.call(this, regex.digits, repeat);\n  },\n\n  /**\n   * Method to validate the presence of letters\n   *\n   * @param {number} repeat - count of required letters\n   */\n  letters: function letters(repeat) {\n    return _process.call(this, regex.letters, repeat);\n  },\n\n  /**\n   * Method to validate the presence of uppercase letters\n   *\n   * @param {number} repeat - count of required uppercase letters\n   */\n  uppercase: function uppercase(repeat) {\n    if (repeat && repeat > 1) {\n      var characterIndex = 0;\n      var upperCaseLetters = 0;\n\n      while (upperCaseLetters < repeat && characterIndex < this.password.length) {\n        var currentLetter = this.password.charAt(characterIndex);\n\n        if (currentLetter !== currentLetter.toLowerCase()) {\n          upperCaseLetters++;\n        }\n\n        characterIndex++;\n      }\n\n      return upperCaseLetters === repeat === this.positive;\n    }\n\n    return this.password !== this.password.toLowerCase() === this.positive;\n  },\n\n  /**\n   * Method to validate the presence of lowercase letters\n   *\n   * @param {number} repeat - count of required lowercase letters\n   */\n  lowercase: function lowercase(repeat) {\n    if (repeat && repeat > 1) {\n      var characterIndex = 0;\n      var lowerCaseLetters = 0;\n\n      while (lowerCaseLetters < repeat && characterIndex < this.password.length) {\n        var currentLetter = this.password.charAt(characterIndex);\n\n        if (currentLetter !== currentLetter.toUpperCase()) {\n          lowerCaseLetters++;\n        }\n\n        characterIndex++;\n      }\n\n      return lowerCaseLetters === repeat === this.positive;\n    }\n\n    return this.password !== this.password.toUpperCase() === this.positive;\n  },\n\n  /**\n   * Method to validate the presence of symbols\n   *\n   * @param {number} repeat - count of required symbols\n   */\n  symbols: function symbols(repeat) {\n    return _process.call(this, regex.symbols, repeat);\n  },\n\n  /**\n   * Method to validate the presence of space\n   *\n   * @param {number} repeat - count of required spaces\n   */\n  spaces: function spaces(repeat) {\n    return _process.call(this, regex.spaces, repeat);\n  },\n\n  /**\n   * Method to provide pre-defined values for password\n   *\n   * @param {array} list - list of values allowed\n   */\n  oneOf: function oneOf(list) {\n    return list.indexOf(this.password) >= 0 === this.positive;\n  }\n};","exports.promiseFinally = function (promise, fn) {\n  var success = function success(result) {\n    fn();\n    return result;\n  };\n\n  var error = function error(e) {\n    fn();\n    return Promise.reject(e);\n  };\n\n  return Promise.resolve(promise).then(success, error);\n};\n/**\n * Converts any value to Error.\n * @param {*} value\n * @returns {Error}\n */\n\n\nexports.toError = function (value) {\n  value = typeof value === 'function' ? value() : value;\n  return typeof value === 'string' ? new Error(value) : value;\n};","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","module.exports = {\n  error: {\n    length: 'Length should be a valid positive number',\n    password: 'Password should be a valid string'\n  },\n  regex: {\n    digits: '(\\\\d.*)',\n    letters: '([a-zA-Z].*)',\n    symbols: '([`~\\\\!@#\\\\$%\\\\^\\\\&\\\\*\\\\(\\\\)\\\\-_\\\\=\\\\+\\\\[\\\\\\{\\\\}\\\\]\\\\\\\\\\|;:\\\\\\'\",<.>\\\\/\\\\?€£¥₹§±].*)',\n    spaces: '([\\\\s].*)'\n  }\n};","require(\"core-js/modules/es.array.reduce\");\n\nvar _classCallCheck = require(\"C:/Sites/idlehoursco/animated-fortnight/web/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Sites/idlehoursco/animated-fortnight/web/node_modules/@babel/runtime/helpers/createClass\");\n\nvar lib = require('./lib');\n\nvar error = require('./constants').error;\n/**\n * Validates that a number is a valid length (positive number)\n *\n * @private\n * @param {number} num - Number to validate\n */\n\n\nfunction _validateLength(num) {\n  var len = Number(num);\n\n  if (isNaN(len) || !Number.isInteger(len) || len < 1) {\n    throw new Error(error.length);\n  }\n}\n/**\n * Tests a validation and return the result\n *\n * @private\n * @param {string} property - Property to validate\n * @return {boolean} Boolean value indicting the validity\n *           of the password against the property\n */\n\n\nfunction _isPasswordValidFor(property) {\n  return lib[property.method].apply(this, property.arguments);\n}\n/**\n * Registers the properties of a password-validation schema object\n *\n * @private\n * @param {string} func - Property name\n * @param {array} args - arguments for the func property\n */\n\n\nfunction _register(func, args) {\n  // Add property to the schema\n  this.properties.push({\n    method: func,\n    arguments: args\n  });\n  return this;\n}\n\nvar PasswordValidator = /*#__PURE__*/function () {\n  \"use strict\";\n\n  /**\n   * Creates a password-validator schema\n   *\n   * @constructor\n   */\n  function PasswordValidator() {\n    _classCallCheck(this, PasswordValidator);\n\n    this.properties = [];\n  }\n  /**\n   * Method to validate the password against schema\n   *\n   * @param {string} pwd - password to valdiate\n   * @param {object} options - optional options to configure validation\n   * @param {boolean} [options.list] - asks for a list of validation\n   *           failures instead of just true/false\n   * @return {boolean|array} Boolean value indicting the validity\n   *           of the password as per schema, if 'options.list'\n   *           is not set. Otherwise, it returns an array of\n   *           property names which failed validations\n   */\n\n\n  _createClass(PasswordValidator, [{\n    key: \"validate\",\n    value: function validate(pwd, options) {\n      var _this = this;\n\n      this.list = Boolean(options && options.list);\n      this.password = String(pwd);\n      this.positive = true;\n\n      if (this.list) {\n        return this.properties.reduce(function (errorList, property) {\n          // Applies all validations defined in lib one by one\n          if (!_isPasswordValidFor.call(_this, property)) {\n            // If the validation for a property fails,\n            // add it to the error list\n            return errorList.concat(property.method);\n          }\n\n          return errorList;\n        }, []);\n      }\n\n      return this.properties.every(_isPasswordValidFor.bind(this));\n    }\n    /**\n     * Rule to mandate the presence of letters in the password\n     *\n     * @param {number} [count] - minimum number of letters required\n     */\n\n  }, {\n    key: \"letters\",\n    value: function letters(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'letters', arguments);\n    }\n    /**\n     * Rule to mandate the presence of digits in the password\n     *\n     * @param {number} [count] - minimum number of digits required\n     */\n\n  }, {\n    key: \"digits\",\n    value: function digits(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'digits', arguments);\n    }\n    /**\n     * Rule to mandate the presence of symbols in the password\n     *\n     * @param {number} [count] - minimum number of symbols required\n     */\n\n  }, {\n    key: \"symbols\",\n    value: function symbols(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'symbols', arguments);\n    }\n    /**\n     * Rule to specify a minimum length of the password\n     *\n     * @param {number} num - minimum length\n     */\n\n  }, {\n    key: \"min\",\n    value: function min(num) {\n      _validateLength(num);\n\n      return _register.call(this, 'min', arguments);\n    }\n    /**\n     * Rule to specify a maximum length of the password\n     *\n     * @param {number} num - maximum length\n     */\n\n  }, {\n    key: \"max\",\n    value: function max(num) {\n      _validateLength(num);\n\n      return _register.call(this, 'max', arguments);\n    }\n    /**\n     * Rule to mandate the presence of lowercase letters in the password\n     *\n     * @param {number} [count] - minimum number of lowercase letters required\n     */\n\n  }, {\n    key: \"lowercase\",\n    value: function lowercase(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'lowercase', arguments);\n    }\n    /**\n     * Rule to mandate the presence of uppercase letters in the password\n     *\n     * @param {number} [count] - minimum number of uppercase letters required\n     */\n\n  }, {\n    key: \"uppercase\",\n    value: function uppercase(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'uppercase', arguments);\n    }\n    /**\n     * Rule to mandate the presence of space in the password\n     * It can be used along with 'not' to not allow spaces\n     * in the password\n     *\n     * @param {number} [count] - minimum number of spaces required\n     */\n\n  }, {\n    key: \"spaces\",\n    value: function spaces(count) {\n      count && _validateLength(count);\n      return _register.call(this, 'spaces', arguments);\n    }\n    /**\n     * Rule to invert the effects of 'not'\n     * Apart from that, 'has' is also used\n     * to make the api readable and chainable\n     */\n\n  }, {\n    key: \"has\",\n    value: function has() {\n      return _register.call(this, 'has', arguments);\n    }\n    /**\n     * Rule to invert the next applied rules.\n     * All the rules applied after 'not' will have opposite effect,\n     * until 'has' rule is applied\n     */\n\n  }, {\n    key: \"not\",\n    value: function not() {\n      return _register.call(this, 'not', arguments);\n    }\n    /**\n     * Rule to invert the effects of 'not'\n     * Apart from that, 'is' is also used\n     * to make the api readable and chainable\n     */\n\n  }, {\n    key: \"is\",\n    value: function is() {\n      return _register.call(this, 'is', arguments);\n    }\n    /**\n     * Rule to whitelist words to be used as password\n     *\n     * @param {array} list - list of values allowed\n     */\n\n  }, {\n    key: \"oneOf\",\n    value: function oneOf() {\n      return _register.call(this, 'oneOf', arguments);\n    }\n  }]);\n\n  return PasswordValidator;\n}();\n\nmodule.exports = PasswordValidator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import { navigate } from 'gatsby'\r\nimport cookie from 'js-cookie'\r\nimport React, { useEffect, useState } from \"react\"\r\n\r\ninterface Props {\r\n  component: React.ElementType\r\n  path: string\r\n}\r\n\r\nconst AuthWrapper = (props: Props) => {\r\n  const { component: Component, path, ...rest } = props\r\n  const [ready, setReady] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!cookie.get('customer_token') || !cookie.get('customer_email')) navigate('/account/login')\r\n    setReady(true)\r\n  }, [0]);\r\n\r\n  return (\r\n    <div>\r\n      {ready ? <Component path={path} {...rest} /> : <span />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuthWrapper\r\n","import PasswordValidator from 'password-validator'\r\n\r\nexport const PasswordSchema = new PasswordValidator()\r\nPasswordSchema\r\n  .is()\r\n  .min(8)\r\n  .is()\r\n  .max(100)\r\n  .has()\r\n  .lowercase()\r\n  .has()\r\n  .uppercase()\r\n","import React, { useCallback, useState } from \"react\"\r\nimport Helmet from \"react-helmet\"\r\nimport { useDeferredLoads } from \"react-loads\"\r\nimport fetch from \"unfetch\"\r\nimport { Link } from \"gatsby\"\r\n// @ts-ignore\r\nimport { encode } from \"shopify-gid\"\r\nimport { navigate } from \"@reach/router\"\r\nimport Timeout from \"await-timeout\"\r\nimport cx from \"classnames\"\r\n\r\nimport { PasswordSchema } from 'src/utils/schema'\r\n\r\nconst Activate = (props: { id: string; token: string }) => {\r\n  const [passwordField1, setPasswordField1] = useState(\"\")\r\n  const [passwordField2, setPasswordField2] = useState(\"\")\r\n  const [attempts, setAttempts] = useState(0)\r\n\r\n  const verifyAccount = useCallback(\r\n    async e => {\r\n      setAttempts(attempts + 1)\r\n\r\n      if (passwordField1 !== passwordField2) {\r\n        await Timeout.set(400)\r\n        throw new Error(\"Passwords do not match.\")\r\n      }\r\n\r\n      if (!PasswordSchema.validate(passwordField1)) {\r\n        throw new Error(\r\n          \"Your password should be between 8 and 100 characters, and have at least one lowercase and one uppercase letter.\"\r\n        )\r\n      }\r\n\r\n      const body = {\r\n        id: encode(\"Customer\", props.id),\r\n        input: {\r\n          activationToken: props.token,\r\n          password: passwordField1,\r\n        },\r\n      }\r\n\r\n      const res = await fetch(`/.netlify/functions/activate`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(body),\r\n      })\r\n\r\n      try {\r\n        const customer = await res.json()\r\n\r\n        if (customer.error) {\r\n          const err = new Error(\"Server Error: Account verification fetch response error.\")\r\n\r\n          throw err\r\n        } else if (!res.ok) {\r\n          const err = new Error(\"Server Error: Account verification fetch not OK.\")\r\n\r\n     \r\n          throw err\r\n        }\r\n\r\n        await Timeout.set(400)\r\n        await navigate(\"/account/login\")\r\n      } catch (err) {\r\n        throw err\r\n      }\r\n      // hacky way to get it to run anew every time\r\n      // and maybe in the future redirect them if they\r\n      // need help.\r\n    },\r\n    [passwordField1, passwordField2, attempts]\r\n  )\r\n\r\n  const { error, load, isReloading, isPending } = useDeferredLoads(\r\n    \"verifyAccount\",\r\n    verifyAccount,\r\n    {}\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      <Helmet title=\"activate account\" />\r\n      <div className=\"nav-spacer\" />\r\n      <div className=\"accounts__wrapper f col aic jcc y px1\">\r\n        <div className=\"x\">\r\n          <div className=\"container--xl ma ac\">\r\n            <h5 className=\"pb0 caps sans ls\">Activate Account</h5>\r\n            <h2 className=\"my0\">Almost there.</h2>\r\n          </div>\r\n          <div className=\"x container--s al mxa\">\r\n            {error && !isReloading && (\r\n              <div className=\"studio mt1 error f col\">\r\n                <span>{error.message}</span>\r\n              </div>\r\n            )}\r\n\r\n            {(isPending || isReloading) && (\r\n              <div className=\"f jcc p1\">\r\n                <span>Loading</span>\r\n              </div>\r\n            )}\r\n\r\n            <div\r\n              className={cx(\r\n                \"x container--s col mya\",\r\n                isPending || isReloading ? \"invisible\" : \"visible\"\r\n              )}\r\n            >\r\n\r\n              <div className=\"pb1  x pya\">\r\n                <div className=\"caps sans ls my1\">Password</div>\r\n                <input\r\n                  className=\"py1 px1  x s16 s16\"\r\n                  type=\"password\"\r\n                  value={passwordField1}\r\n                  onChange={e => setPasswordField1(e.target.value)}\r\n                  placeholder=\"Password\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"pb1 mb1 x pya\">\r\n                <div className=\"caps sans ls mt1 py05\">Confirm Password</div>\r\n                <input\r\n                  className=\"py1 px1 x mb1 s16\"\r\n                  type=\"password\"\r\n                  value={passwordField2}\r\n                  onChange={e => setPasswordField2(e.target.value)}\r\n                  placeholder=\"Confirm Password\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"ac x\">\r\n              \r\n              <button\r\n                type=\"submit\"\r\n                className=\"button button--wide cg ac akz ls-s mt1 inline-block caps s14\"\r\n                onClick={load}\r\n              >\r\n                Activate\r\n              </button>\r\n\r\n              <div className=\"container--m mya pt1 aic\">\r\n                <p className=\" sans s14  pt1 ac\">\r\n                  Already have an account?{\" \"}\r\n                  <Link className=\"underline active\" to=\"/account/login\">\r\n                    Login\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Activate\r\n","import React from 'react'\r\n\r\nexport const ErrorHandling = ({error}: {error: string}) => {\r\n  return (\r\n    <div className=\"studio mt1 error\">\r\n      <span role=\"img\" aria-label=\"error\">\r\n        ⚠️\r\n      </span>\r\n      : {error}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useCallback } from \"react\"\r\nimport Helmet from \"react-helmet\"\r\nimport fetch from \"unfetch\"\r\nimport { Link } from \"gatsby\"\r\nimport { useLoads } from 'react-loads'\r\n\r\nimport { ErrorHandling } from 'src/utils/error'\r\n\r\nexport const ForgotPassword = ({ path }: { path: string }) => {\r\n  const [formSuccess, setFormSuccess] = useState(false)\r\n  const form = React.createRef() as React.RefObject<HTMLFormElement>\r\n\r\n  const handleForgot = useCallback(\r\n    (email) =>\r\n      fetch(`/.netlify/functions/forgot-password`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          email\r\n        }),\r\n      })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.error) {\r\n            throw new Error(res.error)\r\n          } else {\r\n            setFormSuccess(true)\r\n          }\r\n        }),\r\n    []\r\n  )\r\n\r\n  const { error, isRejected, isPending, isReloading, load } = useLoads(\r\n    \"handleForgot\",\r\n    handleForgot as any,\r\n    {\r\n      defer: true,\r\n    }\r\n  )\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (form) {\r\n      const { email } = form!.current!.elements\r\n      load(email.value)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Helmet title=\"forgot password\" />\r\n      <div className=\"nav-spacer\" />\r\n      <div className=\"accounts__wrapper cg f jcc px1 outer aic\">\r\n        <form className=\"f col jcc x aic y\" onSubmit={e => handleSubmit(e)} ref={form}>\r\n          <div className=\"container--xl mya ac\">\r\n            <div className=\"m1\"/>\r\n            <h2 className=\"my0\">Forgot your password?</h2>\r\n          </div>\r\n\r\n          {isRejected && <ErrorHandling error={error.message} />}\r\n\r\n          {formSuccess && (\r\n            <div className=\"small studio mt1\">\r\n              Got it! Email coming your way now.\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"x container--s col aic jcc\">\r\n            <div className=\"pb1 mb1 pya\">\r\n              <label htmlFor='email' className=\"caps sans ls my05\">Email</label>\r\n              <input id='email' name=\"email\" type=\"text\" required={true} className=\"accounts__input py1 px1 x s16 mb1\" placeholder=\"Enter Email\" />\r\n            </div>\r\n            <div className=\"x mxa ac\">\r\n              <button type=\"submit\" className=\"button button--wide cg ac akz ls-s mt1 inline-block caps s14 my1\">\r\n                {(isPending ||\r\n                  isReloading) ? (\r\n                  <span>Loading</span>\r\n                ): (\r\n                  <span>Request Reset</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"mya pt1 s14\">\r\n            Remember your password?{\" \"}\r\n            <Link className=\"underline active\" to=\"/account/login\">\r\n              Login\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import cookie from \"js-cookie\"\r\n\r\nexport const UpdateCustomer = (res: {\r\n  token: string\r\n  customer: {\r\n    firstName: string\r\n  }\r\n}, email: string) => {\r\n  console.log('update cussss', res, email)\r\n  cookie.set(\"customer_token\", res.token, { expires: 25 })\r\n  cookie.set(\"customer_firstName\", res.customer.firstName, {\r\n    expires: 25,\r\n  })\r\n  cookie.set(\"customer_email\", email, { expires: 25 })\r\n}","import React, { useState, useCallback } from 'react'\r\nimport Helmet from 'react-helmet'\r\nimport fetch from 'unfetch'\r\nimport { Link, navigate } from 'gatsby'\r\nimport { useLoads } from 'react-loads'\r\nimport Timeout from 'await-timeout'\r\n\r\nimport { ErrorHandling } from 'src/utils/error'\r\n\r\nimport { UpdateCustomer } from 'src/utils/updateCustomer'\r\nimport { PasswordSchema } from 'src/utils/schema'\r\n\r\nexport const Register = ({path}: {path: string}) => {\r\n  const [passwordField1, setPasswordField1] = useState(\"\")\r\n  const [passwordField2, setPasswordField2] = useState(\"\")\r\n  const form = React.createRef() as React.RefObject<HTMLFormElement>\r\n  const [attempts, setAttempts] = useState(0)\r\n\r\n  const handleRegister = useCallback(\r\n    async (email, password, firstName, lastName) => {\r\n      setAttempts(attempts + 1)\r\n\r\n      if (!PasswordSchema.validate(passwordField1)) {\r\n        throw new Error(\r\n          \"Your password should be between 8 and 100 characters, and have at least one lowercase and one uppercase letter.\"\r\n        )\r\n      }\r\n\r\n      if (passwordField1 !== passwordField2) {\r\n        await Timeout.set(400)\r\n        throw new Error(\"Passwords do not match.\")\r\n      }\r\n      const res = await fetch(`/.netlify/functions/register`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          email,\r\n          password,\r\n          firstName,\r\n          lastName\r\n        })\r\n      })\r\n      try {\r\n        const customer = await res.json()\r\n\r\n        if (customer.error) {\r\n\r\n          throw new Error(customer.error)\r\n        } else {\r\n            UpdateCustomer(customer, email)\r\n            // re-hydrate the cart so it contains the email\r\n            // checkout.hydrate()\r\n            setTimeout(() => {\r\n              navigate('/')\r\n            }, 400)\r\n          }\r\n        } catch (err) {\r\n          throw err\r\n        }\r\n      },\r\n    [passwordField1, passwordField2, attempts]\r\n  )\r\n  const { error, isRejected, isPending, isReloading, load } = useLoads(\r\n    'handleRegister',\r\n    handleRegister as any,\r\n    {\r\n      defer: true\r\n    }\r\n  )\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    const { email, password, firstName, lastName } = form!.current!.elements\r\n    load(email.value, password.value, firstName.value, lastName.value)\r\n  }\r\n  return (\r\n    <div>\r\n      <Helmet title='create account' />\r\n      <div className='accounts__wrapper f col aic jcc y outer px1'>\r\n        <form className='f col jcc aic y' onSubmit={e => handleSubmit(e)} ref={form}>\r\n          <div className='container--xl mya ac'>\r\n            <h5 className='pb0 caps sans ls'>Sign Up</h5>\r\n          </div>\r\n\r\n          {(isPending ||\r\n            isReloading) && (\r\n            <span>Loading</span>\r\n          )}\r\n\r\n          {isRejected && <ErrorHandling error={error.message} />}\r\n\r\n          <div className='x container--s col'>\r\n            <div className='pya pb1'>\r\n              <div className='caps sans s14 ls mt1'>First Name</div>\r\n              <input name='firstName' type='text' required={true} className='accounts__input s16 mb0 x px1 py1' placeholder='First Name' />\r\n            </div>\r\n            <div className='pya pb1'>\r\n              <div className='caps sans s14 ls mt1'>Last Name</div>\r\n              <input name='lastName' type='text' required={true} className='accounts__input s16 mb0 x px1 py1' placeholder='Last Name' />\r\n            </div>\r\n            <div className='pya pb1'>\r\n              <div className='caps sans s14 ls mt1'>Email</div>\r\n              <input name='email' type='text' required={true} className='accounts__input s16 mb0 x px1 py1' placeholder='Enter Email' />\r\n            </div>\r\n            <div className='pya pb1'>\r\n              <div className='caps sans s14 ls mt1 mb0 pb0'>Password</div>\r\n              <p className='mini mt0'>(Must be at least 8 characters long and include a both a lowercase and uppercase letter).</p>\r\n              <input name='password' value={passwordField1} onChange={e => setPasswordField1(e.target.value)} type='password' required={true} className='accounts__input s16 mb0 x px1 py1' placeholder='Password' />\r\n            </div>\r\n            <div className='pya pb1'>\r\n              <div className='caps sans s14 ls mt1'>Confirm Password</div>\r\n              <input name='passwordConfirm' value={passwordField2} onChange={e => setPasswordField2(e.target.value)}  type='password' required={true} className='accounts__input s16 mb1 x px1 py1' placeholder='Verify Password' />\r\n            </div>\r\n          </div>\r\n\r\n          <div className='container--m ac mya mt1'>\r\n            <button type='submit' className='button button--full button--lg cg ac akz ls-s my1 inline-block caps s14'>\r\n              {(isPending ||\r\n                isReloading) ? (\r\n                <span>Loading</span>\r\n              ): (\r\n                <span>Submit</span>\r\n              )}\r\n            </button>\r\n            <p className='py1 s14'>\r\n              Already have an account?{' '}\r\n              <Link className='underline active' to='/account/login'>\r\n                Log in\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect } from 'react'\r\nimport fetch from 'unfetch'\r\nimport { Link, navigate } from 'gatsby'\r\nimport Helmet from 'react-helmet'\r\nimport { useLoads } from 'react-loads'\r\nimport cx from 'classnames'\r\n\r\n\r\nimport { ErrorHandling } from 'src/utils/error'\r\n\r\nimport { UpdateCustomer } from 'src/utils/updateCustomer'\r\nimport { setCustomerInState } from 'src/context/siteContext'\r\n\r\nexport const Login = ({ path }: { path: string }) => {\r\n  const updateCustomerInState = setCustomerInState()\r\n  const form = React.createRef() as React.RefObject<HTMLFormElement>\r\n\r\n  const handleLogin = useCallback(\r\n    (email, password) =>\r\n      fetch(`/.netlify/functions/login`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          email,\r\n          password,\r\n        }),\r\n      })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.error) {\r\n            throw new Error(res.error)\r\n          } else {\r\n            UpdateCustomer(res, email)\r\n            setTimeout(() => {\r\n              updateCustomerInState()\r\n              navigate('/account')\r\n            }, 400)\r\n            return null\r\n          }\r\n        }),\r\n    []\r\n  )\r\n\r\n  const { error, isRejected, isPending, isReloading, load } = useLoads(\r\n    'handleLogin',\r\n    handleLogin as any,\r\n    {\r\n      defer: true,\r\n    }\r\n  )\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n\r\n    const { email, password } = form.current.elements\r\n\r\n    load(email.value, password.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Helmet title='login' />\r\n      <div className='nav-spacer' />\r\n      <div className='accounts__wrapper f col jcc aic y px1 outer'>\r\n        <form\r\n          className={cx('f col jcc x aic y')}\r\n          onSubmit={e => handleSubmit(e)}\r\n          ref={form}\r\n        >\r\n          <div className='container--xl mya ac'>\r\n            <h5 className='pb0 caps sans ls'>Log In</h5>\r\n          </div>\r\n\r\n          <div className='x container--s al mya'>\r\n            {(isPending ||\r\n              isReloading) && (\r\n              <span>Loading</span>\r\n            )}\r\n\r\n          {isRejected && <ErrorHandling error={error.message} />}\r\n\r\n            <div className='pb1 pya'>\r\n              <div className='caps sans s14 ls my05'>Email</div>\r\n              <input name='email' type='text' required={true} className='accounts__input py1 px1 s16 x' placeholder='Enter Email' />\r\n            </div>\r\n            <div className='mb1 pb1 pya'>\r\n              <div className='caps sans s14 ls mt01 py05'>Password</div>\r\n              <input name='password' type='password' required={true} className='accounts__input py1 px1 mb1 s16 x' placeholder='Enter Password' />\r\n            </div>\r\n            <div className='caps sans ls my1'/>\r\n            <div className='x mxa ac'>\r\n              <button type='submit' className='button button--wide button--lg cg ac akz ls-s mt1 inline-block caps s14'>\r\n                {(isPending ||\r\n                  isReloading) ? (\r\n                  <span>Loading</span>\r\n                ): (\r\n                  <span>Log in</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='container-m mya aic'>\r\n            <p className='ac pt1'>\r\n              <Link className='s14 underline active' to='/account/forgot'>\r\n                Forgot password?\r\n              </Link>\r\n            </p>\r\n            <p className='ac py1 s14'>\r\n              Don't have an account?{' '}\r\n              <Link className='underline active' to='/account/register'>\r\n                Sign up\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useCallback } from 'react'\r\nimport Helmet from 'react-helmet'\r\nimport fetch from 'unfetch'\r\nimport { encode } from 'shopify-gid'\r\nimport { useLoads } from 'react-loads'\r\nimport { navigate } from 'gatsby'\r\nimport Timeout from 'await-timeout'\r\n\r\nimport { ErrorHandling } from 'src/utils/error'\r\nimport { PasswordSchema } from 'src/utils/schema'\r\nimport { UpdateCustomer } from \"src/utils/updateCustomer\"\r\n\r\nexport const Reset = (props: {\r\n  path: string\r\n  id?: string\r\n  token?: string\r\n}) => {\r\n  const [passwordField1, setPasswordField1] = useState(\"\")\r\n  const [passwordField2, setPasswordField2] = useState(\"\")\r\n  const [submit, setSubmitting] = useState(false)\r\n  const [formSuccess, setFormSucces] = useState(false)\r\n  const form = React.createRef() as React.RefObject<HTMLFormElement>\r\n\r\n  const handleReset = useCallback(\r\n    async (password) =>  {\r\n\r\n      if (!PasswordSchema.validate(passwordField1)) {\r\n        throw new Error(\r\n          \"Your password should be between 8 and 100 characters, and have at least one lowercase and one uppercase letter.\"\r\n        )\r\n      }\r\n\r\n      if (passwordField1 !== passwordField2) {\r\n        await Timeout.set(400)\r\n        throw new Error(\"Passwords do not match.\")\r\n      }\r\n        fetch(`/.netlify/functions/reset-password`, {\r\n          method: 'POST',\r\n          body: JSON.stringify({\r\n            id: encode('Customer', props.id),\r\n            input: {\r\n              resetToken: props.token,\r\n              password\r\n            }\r\n          })\r\n        })\r\n          .then(res => res.json())\r\n          .then(res => {\r\n            if (res.error) {\r\n              throw new Error(res.error)\r\n              setSubmitting(false)\r\n            } else {\r\n              setFormSucces(true)\r\n              // UpdateCustomer(res, res.customer.email)\r\n              // re-hydrate the cart so it contains the email\r\n              // checkout.hydrate()\r\n              setTimeout(() => {\r\n                navigate('/account/login')\r\n              }, 400)\r\n            }\r\n          })\r\n        },\r\n    [passwordField1, passwordField2]\r\n  )\r\n\r\n  const { error, isRejected, isPending, isReloading, load } = useLoads(\r\n    \"handleReset\",\r\n    handleReset as any,\r\n    {\r\n      defer: true\r\n    }\r\n  )\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setSubmitting(true)\r\n    const { password } = form!.current!.elements\r\n    load(password.value)\r\n  }\r\n  return (\r\n    <div>\r\n      <Helmet title='reset' />\r\n      <div className=\"nav-spacer\" />\r\n      <div className=\"accounts__wrapper f col jcc outer aic y px1\">\r\n        <div className='container--xl ac x ma p1'>\r\n          <form className='f col jcc aic y' onSubmit={e => handleSubmit(e)} ref={form}>\r\n            <div className=\"container--xl mya ac\">\r\n              <h5 className=\"pb0 caps sans ls\">Reset Your Password</h5>\r\n              <h2 className=\"mt025\">Let's get you logged back in.</h2>\r\n            </div>\r\n            {(isPending ||\r\n              isReloading) && (\r\n              <span>Loading</span>\r\n            )}\r\n\r\n            {isRejected && <ErrorHandling error={error.message} />}\r\n\r\n            <div className=\"container--s al mxa x\">\r\n              {formSuccess && (\r\n                <div className='small mt1'>Got it! Email coming your way now.</div>\r\n              )}\r\n              <div className=\"pb1  x pya\">\r\n                <div className=\"caps sans ls mt1\">Password</div>\r\n                <input name='password' type='password'  value={passwordField1} onChange={e => setPasswordField1(e.target.value)} required={true} className='accounts__input px1 py1 s16 x' placeholder='Password' />\r\n              </div>\r\n              <div className=\"pb1  x pya\">\r\n                <div className=\"caps sans ls py05 mt1\">Confirm Password</div>\r\n                <input name='passwordConfirm' type='password' value={passwordField2} onChange={e => setPasswordField2(e.target.value)}  required={true} className='accounts__input mb1 px1 py1 s16 x' placeholder='Confirm Password' />\r\n              </div>\r\n              <div className=\"ac x mt1\">\r\n                <button type='submit' className='button button--wide cg ac akz ls-s mt1 inline-block caps s14'>{submit ? 'Resetting' : 'Reset Password'}</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport Helmet from \"react-helmet\"\r\n\r\nexport const InvalidToken = ({path}: {path:string}) => {\r\n  return <div>\r\n      <Helmet title=\"login\" />\r\n      <div className=\"nav-spacer\" />\r\n      <h1 className=\"ac\">Error: Invalid Activation Token.</h1>\r\n  </div>\r\n}","import \"core-js/modules/es.array.reduce\";\n\n/* spencermountain/spacetime 6.12.1 Apache 2.0 */\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar MSEC_IN_HOUR = 60 * 60 * 1000; //convert our local date syntax a javascript UTC date\n\nvar toUtc = function toUtc(dstChange, offset, year) {\n  var _dstChange$split = dstChange.split('/'),\n      _dstChange$split2 = _slicedToArray(_dstChange$split, 2),\n      month = _dstChange$split2[0],\n      rest = _dstChange$split2[1];\n\n  var _rest$split = rest.split(':'),\n      _rest$split2 = _slicedToArray(_rest$split, 2),\n      day = _rest$split2[0],\n      hour = _rest$split2[1];\n\n  return Date.UTC(year, month - 1, day, hour) - offset * MSEC_IN_HOUR;\n}; // compare epoch with dst change events (in utc)\n\n\nvar inSummerTime = function inSummerTime(epoch, start, end, summerOffset, winterOffset) {\n  var year = new Date(epoch).getUTCFullYear();\n  var startUtc = toUtc(start, winterOffset, year);\n  var endUtc = toUtc(end, summerOffset, year); // console.log(epoch, endUtc)\n  // simple number comparison now\n\n  return epoch >= startUtc && epoch < endUtc;\n};\n\nvar summerTime = inSummerTime; // it reproduces some things in ./index.js, but speeds up spacetime considerably\n\nvar quickOffset = function quickOffset(s) {\n  var zones = s.timezones;\n  var obj = zones[s.tz];\n\n  if (obj === undefined) {\n    console.warn(\"Warning: couldn't find timezone \" + s.tz);\n    return 0;\n  }\n\n  if (obj.dst === undefined) {\n    return obj.offset;\n  } //get our two possible offsets\n\n\n  var jul = obj.offset;\n  var dec = obj.offset + 1; // assume it's the same for now\n\n  if (obj.hem === 'n') {\n    dec = jul - 1;\n  }\n\n  var split = obj.dst.split('->');\n  var inSummer = summerTime(s.epoch, split[0], split[1], jul, dec);\n\n  if (inSummer === true) {\n    return jul;\n  }\n\n  return dec;\n};\n\nvar quick = quickOffset;\nvar _build = {\n  \"9|s\": \"2/dili,2/jayapura\",\n  \"9|n\": \"2/chita,2/khandyga,2/pyongyang,2/seoul,2/tokyo,11/palau\",\n  \"9.5|s|04/05:03->10/04:02\": \"4/adelaide,4/broken_hill,4/south,4/yancowinna\",\n  \"9.5|s\": \"4/darwin,4/north\",\n  \"8|s|03/08:01->10/04:00\": \"12/casey\",\n  \"8|s\": \"2/kuala_lumpur,2/makassar,2/singapore,4/perth,4/west\",\n  \"8|n|03/25:03->09/29:23\": \"2/ulan_bator\",\n  \"8|n\": \"2/brunei,2/choibalsan,2/chongqing,2/chungking,2/harbin,2/hong_kong,2/irkutsk,2/kuching,2/macao,2/macau,2/manila,2/shanghai,2/taipei,2/ujung_pandang,2/ulaanbaatar\",\n  \"8.75|s\": \"4/eucla\",\n  \"7|s\": \"12/davis,2/jakarta,9/christmas\",\n  \"7|n\": \"2/bangkok,2/barnaul,2/ho_chi_minh,2/hovd,2/krasnoyarsk,2/novokuznetsk,2/novosibirsk,2/phnom_penh,2/pontianak,2/saigon,2/tomsk,2/vientiane\",\n  \"6|s\": \"12/vostok\",\n  \"6|n\": \"2/almaty,2/bishkek,2/dacca,2/dhaka,2/kashgar,2/omsk,2/qyzylorda,2/qostanay,2/thimbu,2/thimphu,2/urumqi,9/chagos\",\n  \"6.5|n\": \"2/rangoon,2/yangon,9/cocos\",\n  \"5|s\": \"12/mawson,9/kerguelen\",\n  \"5|n\": \"2/aqtau,2/aqtobe,2/ashgabat,2/ashkhabad,2/atyrau,2/baku,2/dushanbe,2/karachi,2/oral,2/samarkand,2/tashkent,2/yekaterinburg,9/maldives\",\n  \"5.75|n\": \"2/kathmandu,2/katmandu\",\n  \"5.5|n\": \"2/calcutta,2/colombo,2/kolkata\",\n  \"4|s\": \"9/reunion\",\n  \"4|n\": \"2/dubai,2/muscat,2/tbilisi,2/yerevan,8/astrakhan,8/samara,8/saratov,8/ulyanovsk,8/volgograd,2/volgograd,9/mahe,9/mauritius\",\n  \"4.5|n|03/21:00->09/20:24\": \"2/tehran\",\n  \"4.5|n\": \"2/kabul\",\n  \"3|s\": \"12/syowa,9/antananarivo\",\n  \"3|n|03/29:03->10/25:04\": \"2/famagusta,2/nicosia,8/athens,8/bucharest,8/helsinki,8/kiev,8/mariehamn,8/nicosia,8/riga,8/sofia,8/tallinn,8/uzhgorod,8/vilnius,8/zaporozhye\",\n  \"3|n|03/29:02->10/25:03\": \"8/chisinau,8/tiraspol\",\n  \"3|n|03/29:00->10/24:24\": \"2/beirut\",\n  \"3|n|03/28:00->10/24:01\": \"2/gaza,2/hebron\",\n  \"3|n|03/27:02->10/25:02\": \"2/jerusalem,2/tel_aviv\",\n  \"3|n|03/27:00->10/30:01\": \"2/amman\",\n  \"3|n|03/27:00->10/29:24\": \"2/damascus\",\n  \"3|n\": \"0/addis_ababa,0/asmara,0/asmera,0/dar_es_salaam,0/djibouti,0/juba,0/kampala,0/mogadishu,0/nairobi,2/aden,2/baghdad,2/bahrain,2/istanbul,2/kuwait,2/qatar,2/riyadh,8/istanbul,8/kirov,8/minsk,8/moscow,8/simferopol,9/comoro,9/mayotte\",\n  \"2|s|03/29:02->10/25:02\": \"12/troll\",\n  \"2|s\": \"0/gaborone,0/harare,0/johannesburg,0/lubumbashi,0/lusaka,0/maputo,0/maseru,0/mbabane\",\n  \"2|n|03/29:02->10/25:03\": \"0/ceuta,arctic/longyearbyen,3/jan_mayen,8/amsterdam,8/andorra,8/belgrade,8/berlin,8/bratislava,8/brussels,8/budapest,8/busingen,8/copenhagen,8/gibraltar,8/ljubljana,8/luxembourg,8/madrid,8/malta,8/monaco,8/oslo,8/paris,8/podgorica,8/prague,8/rome,8/san_marino,8/sarajevo,8/skopje,8/stockholm,8/tirane,8/vaduz,8/vatican,8/vienna,8/warsaw,8/zagreb,8/zurich\",\n  \"2|n\": \"0/blantyre,0/bujumbura,0/cairo,0/khartoum,0/kigali,0/tripoli,8/kaliningrad\",\n  \"1|s|04/02:01->09/03:03\": \"0/windhoek\",\n  \"1|s\": \"0/kinshasa,0/luanda\",\n  \"1|n|04/19:03->05/31:02\": \"0/casablanca,0/el_aaiun\",\n  \"1|n|03/29:01->10/25:02\": \"3/canary,3/faeroe,3/faroe,3/madeira,8/belfast,8/dublin,8/guernsey,8/isle_of_man,8/jersey,8/lisbon,8/london\",\n  \"1|n\": \"0/algiers,0/bangui,0/brazzaville,0/douala,0/lagos,0/libreville,0/malabo,0/ndjamena,0/niamey,0/porto-novo,0/tunis\",\n  \"14|n\": \"11/kiritimati\",\n  \"13|s|04/05:04->09/27:03\": \"11/apia\",\n  \"13|s|01/15:02->11/05:03\": \"11/tongatapu\",\n  \"13|n\": \"11/enderbury,11/fakaofo\",\n  \"12|s|04/05:03->09/27:02\": \"12/mcmurdo,12/south_pole,11/auckland\",\n  \"12|s|01/12:03->12/20:02\": \"11/fiji\",\n  \"12|n\": \"2/anadyr,2/kamchatka,2/srednekolymsk,11/funafuti,11/kwajalein,11/majuro,11/nauru,11/tarawa,11/wake,11/wallis\",\n  \"12.75|s|04/05:03->04/05:02\": \"11/chatham\",\n  \"11|s|04/05:03->10/04:02\": \"12/macquarie\",\n  \"11|s\": \"11/bougainville\",\n  \"11|n\": \"2/magadan,2/sakhalin,11/efate,11/guadalcanal,11/kosrae,11/noumea,11/pohnpei,11/ponape\",\n  \"11.5|n|04/05:03->10/04:02\": \"11/norfolk\",\n  \"10|s|04/05:03->10/04:02\": \"4/act,4/canberra,4/currie,4/hobart,4/melbourne,4/nsw,4/sydney,4/tasmania,4/victoria\",\n  \"10|s\": \"12/dumontdurville,4/brisbane,4/lindeman,4/queensland\",\n  \"10|n\": \"2/ust-nera,2/vladivostok,2/yakutsk,11/chuuk,11/guam,11/port_moresby,11/saipan,11/truk,11/yap\",\n  \"10.5|s|04/05:01->10/04:02\": \"4/lhi,4/lord_howe\",\n  \"0|n|03/29:00->10/25:01\": \"1/scoresbysund,3/azores\",\n  \"0|n\": \"0/abidjan,0/accra,0/bamako,0/banjul,0/bissau,0/conakry,0/dakar,0/freetown,0/lome,0/monrovia,0/nouakchott,0/ouagadougou,0/sao_tome,0/timbuktu,1/danmarkshavn,3/reykjavik,3/st_helena,13/gmt,13/gmt+0,13/gmt-0,13/gmt0,13/greenwich,13/utc,13/universal,13/zulu\",\n  \"-9|n|03/08:02->11/01:02\": \"1/adak,1/atka\",\n  \"-9|n\": \"11/gambier\",\n  \"-9.5|n\": \"11/marquesas\",\n  \"-8|n|03/08:02->11/01:02\": \"1/anchorage,1/juneau,1/metlakatla,1/nome,1/sitka,1/yakutat\",\n  \"-8|n\": \"11/pitcairn\",\n  \"-7|n|03/08:02->11/01:02\": \"1/ensenada,1/los_angeles,1/santa_isabel,1/tijuana,1/vancouver,6/pacific,10/bajanorte\",\n  \"-7|n|03/08:02->11/01:01\": \"1/dawson,1/whitehorse,6/yukon\",\n  \"-7|n\": \"1/creston,1/dawson_creek,1/fort_nelson,1/hermosillo,1/phoenix\",\n  \"-6|s|04/04:22->09/05:22\": \"7/easterisland,11/easter\",\n  \"-6|n|04/05:02->10/25:02\": \"1/chihuahua,1/mazatlan,10/bajasur\",\n  \"-6|n|03/08:02->11/01:02\": \"1/boise,1/cambridge_bay,1/denver,1/edmonton,1/inuvik,1/ojinaga,1/shiprock,1/yellowknife,6/mountain\",\n  \"-6|n\": \"1/belize,1/costa_rica,1/el_salvador,1/guatemala,1/managua,1/regina,1/swift_current,1/tegucigalpa,6/east-saskatchewan,6/saskatchewan,11/galapagos\",\n  \"-5|s\": \"1/lima,1/rio_branco,5/acre\",\n  \"-5|n|04/05:02->10/25:02\": \"1/bahia_banderas,1/merida,1/mexico_city,1/monterrey,10/general\",\n  \"-5|n|03/12:03->11/05:01\": \"1/north_dakota\",\n  \"-5|n|03/08:02->11/01:02\": \"1/chicago,1/knox_in,1/matamoros,1/menominee,1/rainy_river,1/rankin_inlet,1/resolute,1/winnipeg,6/central\",\n  \"-5|n\": \"1/atikokan,1/bogota,1/cancun,1/cayman,1/coral_harbour,1/eirunepe,1/guayaquil,1/jamaica,1/panama,1/porto_acre\",\n  \"-4|s|05/13:23->08/13:01\": \"12/palmer\",\n  \"-4|s|04/04:24->09/06:00\": \"1/santiago,7/continental\",\n  \"-4|s|03/21:24->10/04:00\": \"1/asuncion\",\n  \"-4|s|02/16:24->11/03:00\": \"1/campo_grande,1/cuiaba\",\n  \"-4|s\": \"1/la_paz,1/manaus,5/west\",\n  \"-4|n|03/12:03->11/05:01\": \"1/indiana,1/kentucky\",\n  \"-4|n|03/08:02->11/01:02\": \"1/detroit,1/fort_wayne,1/grand_turk,1/indianapolis,1/iqaluit,1/louisville,1/montreal,1/nassau,1/new_york,1/nipigon,1/pangnirtung,1/port-au-prince,1/thunder_bay,1/toronto,6/eastern\",\n  \"-4|n|03/08:00->11/01:01\": \"1/havana\",\n  \"-4|n\": \"1/anguilla,1/antigua,1/aruba,1/barbados,1/blanc-sablon,1/boa_vista,1/caracas,1/curacao,1/dominica,1/grenada,1/guadeloupe,1/guyana,1/kralendijk,1/lower_princes,1/marigot,1/martinique,1/montserrat,1/port_of_spain,1/porto_velho,1/puerto_rico,1/santo_domingo,1/st_barthelemy,1/st_kitts,1/st_lucia,1/st_thomas,1/st_vincent,1/tortola,1/virgin\",\n  \"-3|s\": \"1/argentina,1/buenos_aires,1/cordoba,1/fortaleza,1/montevideo,1/punta_arenas,1/sao_paulo,12/rothera,3/stanley,5/east\",\n  \"-3|n|03/28:22->10/24:23\": \"1/nuuk\",\n  \"-3|n|03/08:02->11/01:02\": \"1/glace_bay,1/goose_bay,1/halifax,1/moncton,1/thule,3/bermuda,6/atlantic\",\n  \"-3|n\": \"1/araguaina,1/bahia,1/belem,1/catamarca,1/cayenne,1/jujuy,1/maceio,1/mendoza,1/paramaribo,1/recife,1/rosario,1/santarem\",\n  \"-2|s\": \"5/denoronha\",\n  \"-2|n|03/28:22->10/24:23\": \"1/godthab\",\n  \"-2|n|03/08:02->11/01:02\": \"1/miquelon\",\n  \"-2|n\": \"1/noronha,3/south_georgia\",\n  \"-2.5|n|03/08:02->11/01:02\": \"1/st_johns,6/newfoundland\",\n  \"-1|n\": \"3/cape_verde\",\n  \"-11|n\": \"11/midway,11/niue,11/pago_pago,11/samoa\",\n  \"-10|n\": \"11/honolulu,11/johnston,11/rarotonga,11/tahiti\"\n};\n\nvar _build$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': _build\n}); //prefixes for iana names..\n\n\nvar _prefixes = ['africa', 'america', 'asia', 'atlantic', 'australia', 'brazil', 'canada', 'chile', 'europe', 'indian', 'mexico', 'pacific', 'antarctica', 'etc'];\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nfunction getCjsExportFromNamespace(n) {\n  return n && n['default'] || n;\n}\n\nvar data = getCjsExportFromNamespace(_build$1);\nvar all = {};\nObject.keys(data).forEach(function (k) {\n  var split = k.split('|');\n  var obj = {\n    offset: Number(split[0]),\n    hem: split[1]\n  };\n\n  if (split[2]) {\n    obj.dst = split[2];\n  }\n\n  var names = data[k].split(',');\n  names.forEach(function (str) {\n    str = str.replace(/(^[0-9]+)\\//, function (before, num) {\n      num = Number(num);\n      return _prefixes[num] + '/';\n    });\n    all[str] = obj;\n  });\n});\nall['utc'] = {\n  offset: 0,\n  hem: 'n' //(sorry)\n\n}; //add etc/gmt+n\n\nfor (var i = -14; i <= 14; i += 0.5) {\n  var num = i;\n\n  if (num > 0) {\n    num = '+' + num;\n  }\n\n  var name = 'etc/gmt' + num;\n  all[name] = {\n    offset: i * -1,\n    //they're negative!\n    hem: 'n' //(sorry)\n\n  };\n  name = 'utc/gmt' + num; //this one too, why not.\n\n  all[name] = {\n    offset: i * -1,\n    hem: 'n'\n  };\n} // console.log(all)\n// console.log(Object.keys(all).length)\n\n\nvar unpack = all; //find the implicit iana code for this machine.\n//safely query the Intl object\n//based on - https://bitbucket.org/pellepim/jstimezonedetect/src\n\nvar fallbackTZ = 'utc'; //\n//this Intl object is not supported often, yet\n\nvar safeIntl = function safeIntl() {\n  if (typeof Intl === 'undefined' || typeof Intl.DateTimeFormat === 'undefined') {\n    return null;\n  }\n\n  var format = Intl.DateTimeFormat();\n\n  if (typeof format === 'undefined' || typeof format.resolvedOptions === 'undefined') {\n    return null;\n  }\n\n  var timezone = format.resolvedOptions().timeZone;\n\n  if (!timezone) {\n    return null;\n  }\n\n  return timezone.toLowerCase();\n};\n\nvar guessTz = function guessTz() {\n  var timezone = safeIntl();\n\n  if (timezone === null) {\n    return fallbackTZ;\n  }\n\n  return timezone;\n}; //do it once per computer\n\n\nvar guessTz_1 = guessTz;\nvar isOffset = /(\\-?[0-9]+)h(rs)?/i;\nvar isNumber = /(\\-?[0-9]+)/;\nvar utcOffset = /utc([\\-+]?[0-9]+)/i;\nvar gmtOffset = /gmt([\\-+]?[0-9]+)/i;\n\nvar toIana = function toIana(num) {\n  num = Number(num);\n\n  if (num >= -13 && num <= 13) {\n    num = num * -1; //it's opposite!\n\n    num = (num > 0 ? '+' : '') + num; //add plus sign\n\n    return 'etc/gmt' + num;\n  }\n\n  return null;\n};\n\nvar parseOffset = function parseOffset(tz) {\n  // '+5hrs'\n  var m = tz.match(isOffset);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  } // 'utc+5'\n\n\n  m = tz.match(utcOffset);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  } // 'GMT-5' (not opposite)\n\n\n  m = tz.match(gmtOffset);\n\n  if (m !== null) {\n    var num = Number(m[1]) * -1;\n    return toIana(num);\n  } // '+5'\n\n\n  m = tz.match(isNumber);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  }\n\n  return null;\n};\n\nvar parseOffset_1 = parseOffset;\nvar local = guessTz_1(); //add all the city names by themselves\n\nvar cities = Object.keys(unpack).reduce(function (h, k) {\n  var city = k.split('/')[1] || '';\n  city = city.replace(/_/g, ' ');\n  h[city] = k;\n  return h;\n}, {}); //try to match these against iana form\n\nvar normalize = function normalize(tz) {\n  tz = tz.replace(/ time/g, '');\n  tz = tz.replace(/ (standard|daylight|summer)/g, '');\n  tz = tz.replace(/\\b(east|west|north|south)ern/g, '$1');\n  tz = tz.replace(/\\b(africa|america|australia)n/g, '$1');\n  tz = tz.replace(/\\beuropean/g, 'europe');\n  tz = tz.replace(/\\islands/g, 'island');\n  return tz;\n}; // try our best to reconcile the timzone to this given string\n\n\nvar lookupTz = function lookupTz(str, zones) {\n  if (!str) {\n    return local;\n  }\n\n  if (typeof str !== 'string') {\n    console.error(\"Timezone must be a string - recieved: '\", str, \"'\\n\");\n  }\n\n  var tz = str.trim();\n  var split = str.split('/'); //support long timezones like 'America/Argentina/Rio_Gallegos'\n\n  if (split.length > 2 && zones.hasOwnProperty(tz) === false) {\n    tz = split[0] + '/' + split[1];\n  }\n\n  tz = tz.toLowerCase();\n\n  if (zones.hasOwnProperty(tz) === true) {\n    return tz;\n  } //lookup more loosely..\n\n\n  tz = normalize(tz);\n\n  if (zones.hasOwnProperty(tz) === true) {\n    return tz;\n  } //try city-names\n\n\n  if (cities.hasOwnProperty(tz) === true) {\n    return cities[tz];\n  } // //try to parse '-5h'\n\n\n  if (/[0-9]/.test(tz) === true) {\n    var id = parseOffset_1(tz);\n\n    if (id) {\n      return id;\n    }\n  }\n\n  throw new Error(\"Spacetime: Cannot find timezone named: '\" + str + \"'. Please enter an IANA timezone id.\");\n};\n\nvar find = lookupTz;\nvar o = {\n  millisecond: 1\n};\no.second = 1000;\no.minute = 60000;\no.hour = 3.6e6; // dst is supported post-hoc\n\no.day = 8.64e7; //\n\no.date = o.day;\no.month = 8.64e7 * 29.5; //(average)\n\no.week = 6.048e8;\no.year = 3.154e10; // leap-years are supported post-hoc\n//add plurals\n\nObject.keys(o).forEach(function (k) {\n  o[k + 's'] = o[k];\n});\nvar milliseconds = o;\n\nvar walk = function walk(s, n, fn, unit, previous) {\n  var current = s.d[fn]();\n\n  if (current === n) {\n    return; //already there\n  }\n\n  var startUnit = previous === null ? null : s.d[previous]();\n  var original = s.epoch; //try to get it as close as we can\n\n  var diff = n - current;\n  s.epoch += milliseconds[unit] * diff; //DST edge-case: if we are going many days, be a little conservative\n  // console.log(unit, diff)\n\n  if (unit === 'day') {\n    // s.epoch -= ms.minute\n    //but don't push it over a month\n    if (Math.abs(diff) > 28 && n < 28) {\n      s.epoch += milliseconds.hour;\n    }\n  } // 1st time: oops, did we change previous unit? revert it.\n\n\n  if (previous !== null && startUnit !== s.d[previous]()) {\n    // console.warn('spacetime warning: missed setting ' + unit)\n    s.epoch = original; // s.epoch += ms[unit] * diff * 0.89 // maybe try and make it close...?\n  } //repair it if we've gone too far or something\n  //(go by half-steps, just in case)\n\n\n  var halfStep = milliseconds[unit] / 2;\n\n  while (s.d[fn]() < n) {\n    s.epoch += halfStep;\n  }\n\n  while (s.d[fn]() > n) {\n    s.epoch -= halfStep;\n  } // 2nd time: did we change previous unit? revert it.\n\n\n  if (previous !== null && startUnit !== s.d[previous]()) {\n    // console.warn('spacetime warning: missed setting ' + unit)\n    s.epoch = original;\n  }\n}; //find the desired date by a increment/check while loop\n\n\nvar units = {\n  year: {\n    valid: function valid(n) {\n      return n > -4000 && n < 4000;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getFullYear', 'year', null);\n    }\n  },\n  month: {\n    valid: function valid(n) {\n      return n >= 0 && n <= 11;\n    },\n    walkTo: function walkTo(s, n) {\n      var d = s.d;\n      var current = d.getMonth();\n      var original = s.epoch;\n      var startUnit = d.getFullYear();\n\n      if (current === n) {\n        return;\n      } //try to get it as close as we can..\n\n\n      var diff = n - current;\n      s.epoch += milliseconds.day * (diff * 28); //special case\n      //oops, did we change the year? revert it.\n\n      if (startUnit !== s.d.getFullYear()) {\n        s.epoch = original;\n      } //incriment by day\n\n\n      while (s.d.getMonth() < n) {\n        s.epoch += milliseconds.day;\n      }\n\n      while (s.d.getMonth() > n) {\n        s.epoch -= milliseconds.day;\n      }\n    }\n  },\n  date: {\n    valid: function valid(n) {\n      return n > 0 && n <= 31;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getDate', 'day', 'getMonth');\n    }\n  },\n  hour: {\n    valid: function valid(n) {\n      return n >= 0 && n < 24;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getHours', 'hour', 'getDate');\n    }\n  },\n  minute: {\n    valid: function valid(n) {\n      return n >= 0 && n < 60;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getMinutes', 'minute', 'getHours');\n    }\n  },\n  second: {\n    valid: function valid(n) {\n      return n >= 0 && n < 60;\n    },\n    walkTo: function walkTo(s, n) {\n      //do this one directly\n      s.epoch = s.seconds(n).epoch;\n    }\n  },\n  millisecond: {\n    valid: function valid(n) {\n      return n >= 0 && n < 1000;\n    },\n    walkTo: function walkTo(s, n) {\n      //do this one directly\n      s.epoch = s.milliseconds(n).epoch;\n    }\n  }\n};\n\nvar walkTo = function walkTo(s, wants) {\n  var keys = Object.keys(units);\n  var old = s.clone();\n\n  for (var i = 0; i < keys.length; i++) {\n    var k = keys[i];\n    var n = wants[k];\n\n    if (n === undefined) {\n      n = old[k]();\n    }\n\n    if (typeof n === 'string') {\n      n = parseInt(n, 10);\n    } //make-sure it's valid\n\n\n    if (!units[k].valid(n)) {\n      s.epoch = null;\n\n      if (s.silent === false) {\n        console.warn('invalid ' + k + ': ' + n);\n      }\n\n      return;\n    }\n\n    units[k].walkTo(s, n);\n  }\n\n  return;\n};\n\nvar walk_1 = walkTo;\nvar shortMonths = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sept', 'oct', 'nov', 'dec'];\nvar longMonths = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\nfunction buildMapping() {\n  var obj = {\n    sep: 8 //support this format\n\n  };\n\n  for (var i = 0; i < shortMonths.length; i++) {\n    obj[shortMonths[i]] = i;\n  }\n\n  for (var _i = 0; _i < longMonths.length; _i++) {\n    obj[longMonths[_i]] = _i;\n  }\n\n  return obj;\n}\n\nvar months = {\n  \"short\": function short() {\n    return shortMonths;\n  },\n  \"long\": function long() {\n    return longMonths;\n  },\n  mapping: function mapping() {\n    return buildMapping();\n  },\n  set: function set(i18n) {\n    shortMonths = i18n[\"short\"] || shortMonths;\n    longMonths = i18n[\"long\"] || longMonths;\n  }\n}; //pull-apart ISO offsets, like \"+0100\"\n\nvar parseOffset$1 = function parseOffset(s, offset) {\n  if (!offset) {\n    return s;\n  } //this is a fancy-move\n\n\n  if (offset === 'Z' || offset === 'z') {\n    offset = '+0000';\n  } // according to ISO8601, tz could be hh:mm, hhmm or hh\n  // so need few more steps before the calculation.\n\n\n  var num = 0; // for (+-)hh:mm\n\n  if (/^[\\+-]?[0-9]{2}:[0-9]{2}$/.test(offset)) {\n    //support \"+01:00\"\n    if (/:00/.test(offset) === true) {\n      offset = offset.replace(/:00/, '');\n    } //support \"+01:30\"\n\n\n    if (/:30/.test(offset) === true) {\n      offset = offset.replace(/:30/, '.5');\n    }\n  } // for (+-)hhmm\n\n\n  if (/^[\\+-]?[0-9]{4}$/.test(offset)) {\n    offset = offset.replace(/30$/, '.5');\n  }\n\n  num = parseFloat(offset); //divide by 100 or 10 - , \"+0100\", \"+01\"\n\n  if (Math.abs(num) > 100) {\n    num = num / 100;\n  } //okay, try to match it to a utc timezone\n  //remember - this is opposite! a -5 offset maps to Etc/GMT+5  ¯\\_(:/)_/¯\n  //https://askubuntu.com/questions/519550/why-is-the-8-timezone-called-gmt-8-in-the-filesystem\n\n\n  num *= -1;\n\n  if (num >= 0) {\n    num = '+' + num;\n  }\n\n  var tz = 'etc/gmt' + num;\n  var zones = s.timezones;\n\n  if (zones[tz]) {\n    // log a warning if we're over-writing a given timezone?\n    // console.log('changing timezone to: ' + tz)\n    s.tz = tz;\n  }\n\n  return s;\n};\n\nvar parseOffset_1$1 = parseOffset$1;\n\nvar parseTime = function parseTime(s) {\n  var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  str = str.replace(/^\\s+/, '').toLowerCase(); //trim\n  //formal time formats - 04:30.23\n\n  var arr = str.match(/([0-9]{1,2}):([0-9]{1,2}):?([0-9]{1,2})?[:\\.]?([0-9]{1,4})?/);\n\n  if (arr !== null) {\n    //validate it a little\n    var h = Number(arr[1]);\n\n    if (h < 0 || h > 24) {\n      return s.startOf('day');\n    }\n\n    var m = Number(arr[2]); //don't accept '5:3pm'\n\n    if (arr[2].length < 2 || m < 0 || m > 59) {\n      return s.startOf('day');\n    }\n\n    if (arr[4] > 999) {\n      // fix overflow issue with milliseconds, if input is longer than standard (e.g. 2017-08-06T09:00:00.123456Z)\n      arr[4] = parseInt(\"\".concat(arr[4]).substring(0, 3), 10);\n    }\n\n    s = s.hour(h);\n    s = s.minute(m);\n    s = s.seconds(arr[3] || 0);\n    s = s.millisecond(arr[4] || 0); //parse-out am/pm\n\n    var ampm = str.match(/[\\b0-9](am|pm)\\b/);\n\n    if (ampm !== null && ampm[1]) {\n      s = s.ampm(ampm[1]);\n    }\n\n    return s;\n  } //try an informal form - 5pm (no minutes)\n\n\n  arr = str.match(/([0-9]+) ?(am|pm)/);\n\n  if (arr !== null && arr[1]) {\n    var _h = Number(arr[1]); //validate it a little..\n\n\n    if (_h > 12 || _h < 1) {\n      return s.startOf('day');\n    }\n\n    s = s.hour(arr[1] || 0);\n    s = s.ampm(arr[2]);\n    s = s.startOf('hour');\n    return s;\n  } //no time info found, use start-of-day\n\n\n  s = s.startOf('day');\n  return s;\n};\n\nvar parseTime_1 = parseTime;\nvar monthLengths = [31, // January - 31 days\n28, // February - 28 days in a common year and 29 days in leap years\n31, // March - 31 days\n30, // April - 30 days\n31, // May - 31 days\n30, // June - 30 days\n31, // July - 31 days\n31, // August - 31 days\n30, // September - 30 days\n31, // October - 31 days\n30, // November - 30 days\n31 // December - 31 days\n];\nvar monthLengths_1 = monthLengths; // 28 - feb\n\nvar fns = createCommonjsModule(function (module, exports) {\n  //git:blame @JuliasCaesar https://www.timeanddate.com/date/leapyear.html\n  exports.isLeapYear = function (year) {\n    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n  }; // unsurprisingly-nasty `typeof date` call\n\n\n  exports.isDate = function (d) {\n    return Object.prototype.toString.call(d) === '[object Date]' && !isNaN(d.valueOf());\n  };\n\n  exports.isArray = function (input) {\n    return Object.prototype.toString.call(input) === '[object Array]';\n  };\n\n  exports.isObject = function (input) {\n    return Object.prototype.toString.call(input) === '[object Object]';\n  };\n\n  exports.zeroPad = function (str) {\n    var len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var pad = '0';\n    str = str + '';\n    return str.length >= len ? str : new Array(len - str.length + 1).join(pad) + str;\n  };\n\n  exports.titleCase = function (str) {\n    if (!str) {\n      return '';\n    }\n\n    return str[0].toUpperCase() + str.substr(1);\n  };\n\n  exports.ordinal = function (i) {\n    var j = i % 10;\n    var k = i % 100;\n\n    if (j === 1 && k !== 11) {\n      return i + 'st';\n    }\n\n    if (j === 2 && k !== 12) {\n      return i + 'nd';\n    }\n\n    if (j === 3 && k !== 13) {\n      return i + 'rd';\n    }\n\n    return i + 'th';\n  }; //strip 'st' off '1st'..\n\n\n  exports.toCardinal = function (str) {\n    str = String(str);\n    str = str.replace(/([0-9])(st|nd|rd|th)$/i, '$1');\n    return parseInt(str, 10);\n  }; //used mostly for cleanup of unit names, like 'months'\n\n\n  exports.normalize = function () {\n    var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    str = str.toLowerCase().trim();\n    str = str.replace(/ies$/, 'y'); //'centuries'\n\n    str = str.replace(/s$/, '');\n    str = str.replace(/-/g, '');\n\n    if (str === 'day' || str === 'days') {\n      return 'date';\n    }\n\n    if (str === 'min' || str === 'mins') {\n      return 'minute';\n    }\n\n    return str;\n  };\n\n  exports.getEpoch = function (tmp) {\n    //support epoch\n    if (typeof tmp === 'number') {\n      return tmp;\n    } //suport date objects\n\n\n    if (exports.isDate(tmp)) {\n      return tmp.getTime();\n    }\n\n    if (tmp.epoch) {\n      return tmp.epoch;\n    }\n\n    return null;\n  }; //make sure this input is a spacetime obj\n\n\n  exports.beADate = function (d, s) {\n    if (exports.isObject(d) === false) {\n      return s.clone().set(d);\n    }\n\n    return d;\n  };\n\n  exports.formatTimezone = function (offset) {\n    var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var sign = offset > 0 ? '+' : '-';\n    var absOffset = Math.abs(offset);\n    var hours = exports.zeroPad(parseInt('' + absOffset, 10));\n    var minutes = exports.zeroPad(absOffset % 1 * 60);\n    return \"\".concat(sign).concat(hours).concat(delimiter).concat(minutes);\n  };\n});\nvar fns_1 = fns.isLeapYear;\nvar fns_2 = fns.isDate;\nvar fns_3 = fns.isArray;\nvar fns_4 = fns.isObject;\nvar fns_5 = fns.zeroPad;\nvar fns_6 = fns.titleCase;\nvar fns_7 = fns.ordinal;\nvar fns_8 = fns.toCardinal;\nvar fns_9 = fns.normalize;\nvar fns_10 = fns.getEpoch;\nvar fns_11 = fns.beADate;\nvar fns_12 = fns.formatTimezone;\nvar isLeapYear = fns.isLeapYear; //given a month, return whether day number exists in it\n\nvar hasDate = function hasDate(obj) {\n  //invalid values\n  if (monthLengths_1.hasOwnProperty(obj.month) !== true) {\n    return false;\n  } //support leap-year in february\n\n\n  if (obj.month === 1) {\n    if (isLeapYear(obj.year) && obj.date <= 29) {\n      return true;\n    } else {\n      return obj.date <= 28;\n    }\n  } //is this date too-big for this month?\n\n\n  var max = monthLengths_1[obj.month] || 0;\n\n  if (obj.date <= max) {\n    return true;\n  }\n\n  return false;\n};\n\nvar hasDate_1 = hasDate;\nvar months$1 = months.mapping();\n\nvar parseYear = function parseYear() {\n  var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var today = arguments.length > 1 ? arguments[1] : undefined;\n  var year = parseInt(str.trim(), 10); // use a given year from options.today\n\n  if (!year && today) {\n    year = today.year;\n  } // fallback to this year\n\n\n  year = year || new Date().getFullYear();\n  return year;\n};\n\nvar strFmt = [//iso-this 1998-05-30T22:00:00:000Z, iso-that 2017-04-03T08:00:00-0700\n{\n  reg: /^(\\-?0?0?[0-9]{3,4})-([0-9]{1,2})-([0-9]{1,2})[T| ]([0-9.:]+)(Z|[0-9\\-\\+:]+)?$/i,\n  parse: function parse(s, arr, givenTz, options) {\n    var month = parseInt(arr[2], 10) - 1;\n    var obj = {\n      year: arr[1],\n      month: month,\n      date: arr[3]\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    parseOffset_1$1(s, arr[5]);\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //iso \"2015-03-25\" or \"2015/03/25\" or \"2015/03/25 12:26:14 PM\"\n{\n  reg: /^([0-9]{4})[\\-\\/.]([0-9]{1,2})[\\-\\/.]([0-9]{1,2}),?( [0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var obj = {\n      year: arr[1],\n      month: parseInt(arr[2], 10) - 1,\n      date: parseInt(arr[3], 10)\n    };\n\n    if (obj.month >= 12) {\n      //support yyyy/dd/mm (weird, but ok)\n      obj.date = parseInt(arr[2], 10);\n      obj.month = parseInt(arr[3], 10) - 1;\n    }\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //mm/dd/yyyy - uk/canada \"6/28/2019, 12:26:14 PM\"\n{\n  reg: /^([0-9]{1,2})[\\-\\/.]([0-9]{1,2})[\\-\\/.]?([0-9]{4})?,?( [0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var month = parseInt(arr[1], 10) - 1;\n    var date = parseInt(arr[2], 10); //support dd/mm/yyy\n\n    if (s.british || month >= 12) {\n      date = parseInt(arr[1], 10);\n      month = parseInt(arr[2], 10) - 1;\n    }\n\n    var year = arr[3] || new Date().getFullYear();\n    var obj = {\n      year: year,\n      month: month,\n      date: date\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, // '2012-06' last attempt at iso-like format\n{\n  reg: /^([0-9]{4})[\\-\\/]([0-9]{2})$/i,\n  parse: function parse(s, arr, givenTz, options) {\n    var month = parseInt(arr[2], 10) - 1;\n    var obj = {\n      year: arr[1],\n      month: month,\n      date: 1\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    parseOffset_1$1(s, arr[5]);\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //common british format - \"25-feb-2015\"\n{\n  reg: /^([0-9]{1,2})[\\-\\/]([a-z]+)[\\-\\/]?([0-9]{4})?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[2].toLowerCase()];\n    var year = parseYear(arr[3], s._today);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[1] || '')\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //alt short format - \"feb-25-2015\"\n{\n  reg: /^([a-z]+)[\\-\\/]([0-9]{1,2})[\\-\\/]?([0-9]{4})?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[1].toLowerCase()];\n    var year = parseYear(arr[3], s._today);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[2] || '')\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //Long \"Mar 25 2015\"\n//February 22, 2017 15:30:00\n{\n  reg: /^([a-z]+) ([0-9]{1,2}(?:st|nd|rd|th)?),?( [0-9]{4})?( ([0-9:]+( ?am| ?pm| ?gmt)?))?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[1].toLowerCase()];\n    var year = parseYear(arr[3], s._today);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[2] || '')\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //February 2017 (implied date)\n{\n  reg: /^([a-z]+) ([0-9]{4})$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[1].toLowerCase()];\n    var year = parseYear(arr[2], s._today);\n    var obj = {\n      year: year,\n      month: month,\n      date: s._today.date || 1\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //Long \"25 Mar 2015\"\n{\n  reg: /^([0-9]{1,2}(?:st|nd|rd|th)?) ([a-z]+),?( [0-9]{4})?,? ?([0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[2].toLowerCase()];\n\n    if (!month) {\n      return null;\n    }\n\n    var year = parseYear(arr[3], s._today);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[1])\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, {\n  // 'q2 2002'\n  reg: /^(q[0-9])( of)?( [0-9]{4})?/i,\n  parse: function parse(s, arr) {\n    var quarter = arr[1] || '';\n    s = s.quarter(quarter);\n    var year = arr[3] || '';\n\n    if (year) {\n      year = year.trim();\n      s = s.year(year);\n    }\n\n    return s;\n  }\n}, {\n  // 'summer 2002'\n  reg: /^(spring|summer|winter|fall|autumn)( of)?( [0-9]{4})?/i,\n  parse: function parse(s, arr) {\n    var season = arr[1] || '';\n    s = s.season(season);\n    var year = arr[3] || '';\n\n    if (year) {\n      year = year.trim();\n      s = s.year(year);\n    }\n\n    return s;\n  }\n}, {\n  // '200bc'\n  reg: /^[0-9,]+ ?b\\.?c\\.?$/i,\n  parse: function parse(s, arr) {\n    var str = arr[0] || ''; //make negative-year\n\n    str = str.replace(/^([0-9,]+) ?b\\.?c\\.?$/i, '-$1'); //remove commas\n\n    str = str.replace(/,/g, '');\n    var year = parseInt(str.trim(), 10);\n    var d = new Date();\n    var obj = {\n      year: year,\n      month: d.getMonth(),\n      date: d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}, {\n  // '200ad'\n  reg: /^[0-9,]+ ?(a\\.?d\\.?|c\\.?e\\.?)$/i,\n  parse: function parse(s, arr) {\n    var str = arr[0] || ''; //remove commas\n\n    str = str.replace(/,/g, '');\n    var year = parseInt(str.trim(), 10);\n    var d = new Date();\n    var obj = {\n      year: year,\n      month: d.getMonth(),\n      date: d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}, {\n  // '1992'\n  reg: /^[0-9]{4}( ?a\\.?d\\.?)?$/i,\n  parse: function parse(s, arr) {\n    var today = s._today;\n    var year = parseYear(arr[0], today);\n    var d = new Date(); // using today's date, but a new month is awkward.\n\n    if (today.month && !today.date) {\n      today.date = 1;\n    }\n\n    var obj = {\n      year: year,\n      month: today.month || d.getMonth(),\n      date: today.date || d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}];\nvar strParse = strFmt; // pull in 'today' data for the baseline moment\n\nvar getNow = function getNow(s) {\n  s.epoch = Date.now();\n  Object.keys(s._today || {}).forEach(function (k) {\n    if (typeof s[k] === 'function') {\n      s = s[k](s._today[k]);\n    }\n  });\n  return s;\n};\n\nvar dates = {\n  now: function now(s) {\n    return getNow(s);\n  },\n  today: function today(s) {\n    return getNow(s);\n  },\n  tonight: function tonight(s) {\n    s = getNow(s);\n    s = s.hour(18); //6pm\n\n    return s;\n  },\n  tomorrow: function tomorrow(s) {\n    s = getNow(s);\n    s = s.add(1, 'day');\n    s = s.startOf('day');\n    return s;\n  },\n  yesterday: function yesterday(s) {\n    s = getNow(s);\n    s = s.subtract(1, 'day');\n    s = s.startOf('day');\n    return s;\n  },\n  christmas: function christmas(s) {\n    var year = getNow(s).year();\n    s = s.set([year, 11, 25, 18, 0, 0]); // Dec 25\n\n    return s;\n  },\n  'new years': function newYears(s) {\n    var year = getNow(s).year();\n    s = s.set([year, 11, 31, 18, 0, 0]); // Dec 31\n\n    return s;\n  }\n};\ndates['new years eve'] = dates['new years'];\nvar namedDates = dates; //  -  can't use built-in js parser ;(\n//=========================================\n// ISO Date\t  \"2015-03-25\"\n// Short Date\t\"03/25/2015\" or \"2015/03/25\"\n// Long Date\t\"Mar 25 2015\" or \"25 Mar 2015\"\n// Full Date\t\"Wednesday March 25 2015\"\n//=========================================\n//-- also -\n// if the given epoch is really small, they've probably given seconds and not milliseconds\n// anything below this number is likely (but not necessarily) a mistaken input.\n// this may seem like an arbitrary number, but it's 'within jan 1970'\n// this is only really ambiguous until 2054 or so\n\nvar minimumEpoch = 2500000000;\nvar defaults = {\n  year: new Date().getFullYear(),\n  month: 0,\n  date: 1\n}; //support [2016, 03, 01] format\n\nvar handleArray = function handleArray(s, arr, today) {\n  if (arr.length === 0) {\n    return s;\n  }\n\n  var order = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond'];\n\n  for (var i = 0; i < order.length; i++) {\n    var num = arr[i] || today[order[i]] || defaults[order[i]] || 0;\n    s = s[order[i]](num);\n  }\n\n  return s;\n}; //support {year:2016, month:3} format\n\n\nvar handleObject = function handleObject(s, obj, today) {\n  // if obj is empty, do nothing\n  if (Object.keys(obj).length === 0) {\n    return s;\n  }\n\n  obj = Object.assign({}, defaults, today, obj);\n  var keys = Object.keys(obj);\n\n  for (var i = 0; i < keys.length; i++) {\n    var unit = keys[i]; //make sure we have this method\n\n    if (s[unit] === undefined || typeof s[unit] !== 'function') {\n      continue;\n    } //make sure the value is a number\n\n\n    if (obj[unit] === null || obj[unit] === undefined || obj[unit] === '') {\n      continue;\n    }\n\n    var num = obj[unit] || today[unit] || defaults[unit] || 0;\n    s = s[unit](num);\n  }\n\n  return s;\n}; //find the epoch from different input styles\n\n\nvar parseInput = function parseInput(s, input, givenTz) {\n  var today = s._today || defaults; //if we've been given a epoch number, it's easy\n\n  if (typeof input === 'number') {\n    if (input > 0 && input < minimumEpoch && s.silent === false) {\n      console.warn('  - Warning: You are setting the date to January 1970.');\n      console.warn('       -   did input seconds instead of milliseconds?');\n    }\n\n    s.epoch = input;\n    return s;\n  } //set tmp time\n\n\n  s.epoch = Date.now(); // overwrite tmp time with 'today' value, if exists\n\n  if (s._today && fns.isObject(s._today) && Object.keys(s._today).length > 0) {\n    var res = handleObject(s, today, defaults);\n\n    if (res.isValid()) {\n      s.epoch = res.epoch;\n    }\n  } // null input means 'now'\n\n\n  if (input === null || input === undefined || input === '') {\n    return s; //k, we're good.\n  } //support input of Date() object\n\n\n  if (fns.isDate(input) === true) {\n    s.epoch = input.getTime();\n    return s;\n  } //support [2016, 03, 01] format\n\n\n  if (fns.isArray(input) === true) {\n    s = handleArray(s, input, today);\n    return s;\n  } //support {year:2016, month:3} format\n\n\n  if (fns.isObject(input) === true) {\n    //support spacetime object as input\n    if (input.epoch) {\n      s.epoch = input.epoch;\n      s.tz = input.tz;\n      return s;\n    }\n\n    s = handleObject(s, input, today);\n    return s;\n  } //input as a string..\n\n\n  if (typeof input !== 'string') {\n    return s;\n  } //little cleanup..\n\n\n  input = input.replace(/\\b(mon|tues|wed|wednes|thu|thurs|fri|sat|satur|sun)(day)?\\b/i, '');\n  input = input.replace(/,/g, '');\n  input = input.replace(/ +/g, ' ').trim(); //try some known-words, like 'now'\n\n  if (namedDates.hasOwnProperty(input) === true) {\n    s = namedDates[input](s);\n    return s;\n  } //try each text-parse template, use the first good result\n\n\n  for (var i = 0; i < strParse.length; i++) {\n    var m = input.match(strParse[i].reg);\n\n    if (m) {\n      // console.log(strFmt[i].reg)\n      var _res = strParse[i].parse(s, m, givenTz);\n\n      if (_res !== null && _res.isValid()) {\n        return _res;\n      }\n    }\n  }\n\n  if (s.silent === false) {\n    console.warn(\"Warning: couldn't parse date-string: '\" + input + \"'\");\n  }\n\n  s.epoch = null;\n  return s;\n};\n\nvar input = parseInput;\nvar shortDays = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\nvar longDays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\nvar days = {\n  \"short\": function short() {\n    return shortDays;\n  },\n  \"long\": function long() {\n    return longDays;\n  },\n  set: function set(i18n) {\n    shortDays = i18n[\"short\"] || shortDays;\n    longDays = i18n[\"long\"] || longDays;\n  },\n  aliases: {\n    tues: 2,\n    thur: 4,\n    thurs: 4\n  }\n}; // it's kind of nuts how involved this is\n// \"+01:00\", \"+0100\", or simply \"+01\"\n\nvar isoOffset = function isoOffset(s) {\n  var offset = s.timezone().current.offset;\n  return !offset ? 'Z' : fns.formatTimezone(offset, ':');\n};\n\nvar _offset = isoOffset;\nvar format = {\n  day: function day(s) {\n    return fns.titleCase(s.dayName());\n  },\n  'day-short': function dayShort(s) {\n    return fns.titleCase(days[\"short\"]()[s.day()]);\n  },\n  'day-number': function dayNumber(s) {\n    return s.day();\n  },\n  'day-ordinal': function dayOrdinal(s) {\n    return fns.ordinal(s.day());\n  },\n  'day-pad': function dayPad(s) {\n    return fns.zeroPad(s.day());\n  },\n  date: function date(s) {\n    return s.date();\n  },\n  'date-ordinal': function dateOrdinal(s) {\n    return fns.ordinal(s.date());\n  },\n  'date-pad': function datePad(s) {\n    return fns.zeroPad(s.date());\n  },\n  month: function month(s) {\n    return fns.titleCase(s.monthName());\n  },\n  'month-short': function monthShort(s) {\n    return fns.titleCase(months[\"short\"]()[s.month()]);\n  },\n  'month-number': function monthNumber(s) {\n    return s.month();\n  },\n  'month-ordinal': function monthOrdinal(s) {\n    return fns.ordinal(s.month());\n  },\n  'month-pad': function monthPad(s) {\n    return fns.zeroPad(s.month());\n  },\n  'iso-month': function isoMonth(s) {\n    return fns.zeroPad(s.month() + 1);\n  },\n  //1-based months\n  year: function year(s) {\n    var year = s.year();\n\n    if (year > 0) {\n      return year;\n    }\n\n    year = Math.abs(year);\n    return year + ' BC';\n  },\n  'year-short': function yearShort(s) {\n    var year = s.year();\n\n    if (year > 0) {\n      return \"'\".concat(String(s.year()).substr(2, 4));\n    }\n\n    year = Math.abs(year);\n    return year + ' BC';\n  },\n  'iso-year': function isoYear(s) {\n    var year = s.year();\n    var isNegative = year < 0;\n    var str = fns.zeroPad(Math.abs(year), 4); //0-padded\n\n    if (isNegative) {\n      //negative years are for some reason 6-digits ('-00008')\n      str = fns.zeroPad(str, 6);\n      str = '-' + str;\n    }\n\n    return str;\n  },\n  time: function time(s) {\n    return s.time();\n  },\n  'time-24': function time24(s) {\n    return \"\".concat(s.hour24(), \":\").concat(fns.zeroPad(s.minute()));\n  },\n  hour: function hour(s) {\n    return s.hour12();\n  },\n  'hour-pad': function hourPad(s) {\n    return fns.zeroPad(s.hour12());\n  },\n  'hour-24': function hour24(s) {\n    return s.hour24();\n  },\n  'hour-24-pad': function hour24Pad(s) {\n    return fns.zeroPad(s.hour24());\n  },\n  minute: function minute(s) {\n    return s.minute();\n  },\n  'minute-pad': function minutePad(s) {\n    return fns.zeroPad(s.minute());\n  },\n  second: function second(s) {\n    return s.second();\n  },\n  'second-pad': function secondPad(s) {\n    return fns.zeroPad(s.second());\n  },\n  ampm: function ampm(s) {\n    return s.ampm();\n  },\n  quarter: function quarter(s) {\n    return 'Q' + s.quarter();\n  },\n  season: function season(s) {\n    return s.season();\n  },\n  era: function era(s) {\n    return s.era();\n  },\n  json: function json(s) {\n    return s.json();\n  },\n  timezone: function timezone(s) {\n    return s.timezone().name;\n  },\n  offset: function offset(s) {\n    return _offset(s);\n  },\n  numeric: function numeric(s) {\n    return \"\".concat(s.year(), \"/\").concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()));\n  },\n  // yyyy/mm/dd\n  'numeric-us': function numericUs(s) {\n    return \"\".concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()), \"/\").concat(s.year());\n  },\n  // mm/dd/yyyy\n  'numeric-uk': function numericUk(s) {\n    return \"\".concat(fns.zeroPad(s.date()), \"/\").concat(fns.zeroPad(s.month() + 1), \"/\").concat(s.year());\n  },\n  //dd/mm/yyyy\n  'mm/dd': function mmDd(s) {\n    return \"\".concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()));\n  },\n  //mm/dd\n  // ... https://en.wikipedia.org/wiki/ISO_8601 ;(((\n  iso: function iso(s) {\n    var year = s.format('iso-year');\n    var month = fns.zeroPad(s.month() + 1); //1-based months\n\n    var date = fns.zeroPad(s.date());\n    var hour = fns.zeroPad(s.h24());\n    var minute = fns.zeroPad(s.minute());\n    var second = fns.zeroPad(s.second());\n    var ms = fns.zeroPad(s.millisecond(), 3);\n\n    var offset = _offset(s);\n\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(date, \"T\").concat(hour, \":\").concat(minute, \":\").concat(second, \".\").concat(ms).concat(offset); //2018-03-09T08:50:00.000-05:00\n  },\n  'iso-short': function isoShort(s) {\n    var month = fns.zeroPad(s.month() + 1); //1-based months\n\n    var date = fns.zeroPad(s.date());\n    return \"\".concat(s.year(), \"-\").concat(month, \"-\").concat(date); //2017-02-15\n  },\n  'iso-utc': function isoUtc(s) {\n    return new Date(s.epoch).toISOString(); //2017-03-08T19:45:28.367Z\n  },\n  //i made these up\n  nice: function nice(s) {\n    return \"\".concat(months[\"short\"]()[s.month()], \" \").concat(fns.ordinal(s.date()), \", \").concat(s.time());\n  },\n  'nice-year': function niceYear(s) {\n    return \"\".concat(months[\"short\"]()[s.month()], \" \").concat(fns.ordinal(s.date()), \", \").concat(s.year());\n  },\n  'nice-day': function niceDay(s) {\n    return \"\".concat(days[\"short\"]()[s.day()], \" \").concat(fns.titleCase(months[\"short\"]()[s.month()]), \" \").concat(fns.ordinal(s.date()));\n  },\n  'nice-full': function niceFull(s) {\n    return \"\".concat(s.dayName(), \" \").concat(fns.titleCase(s.monthName()), \" \").concat(fns.ordinal(s.date()), \", \").concat(s.time());\n  }\n}; //aliases\n\nvar aliases = {\n  'day-name': 'day',\n  'month-name': 'month',\n  'iso 8601': 'iso',\n  'time-h24': 'time-24',\n  'time-12': 'time',\n  'time-h12': 'time',\n  tz: 'timezone',\n  'day-num': 'day-number',\n  'month-num': 'month-number',\n  'month-iso': 'iso-month',\n  'year-iso': 'iso-year',\n  'nice-short': 'nice',\n  mdy: 'numeric-us',\n  dmy: 'numeric-uk',\n  ymd: 'numeric',\n  'yyyy/mm/dd': 'numeric',\n  'mm/dd/yyyy': 'numeric-us',\n  'dd/mm/yyyy': 'numeric-us',\n  'little-endian': 'numeric-uk',\n  'big-endian': 'numeric',\n  'day-nice': 'nice-day'\n};\nObject.keys(aliases).forEach(function (k) {\n  return format[k] = format[aliases[k]];\n});\n\nvar printFormat = function printFormat(s) {\n  var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ''; //don't print anything if it's an invalid date\n\n  if (s.isValid() !== true) {\n    return '';\n  } //support .format('month')\n\n\n  if (format.hasOwnProperty(str)) {\n    var out = format[str](s) || '';\n\n    if (str !== 'json') {\n      out = String(out);\n\n      if (str !== 'ampm') {\n        out = fns.titleCase(out);\n      }\n    }\n\n    return out;\n  } //support '{hour}:{minute}' notation\n\n\n  if (str.indexOf('{') !== -1) {\n    var sections = /\\{(.+?)\\}/g;\n    str = str.replace(sections, function (_, fmt) {\n      fmt = fmt.toLowerCase().trim();\n\n      if (format.hasOwnProperty(fmt)) {\n        return String(format[fmt](s));\n      }\n\n      return '';\n    });\n    return str;\n  }\n\n  return s.format('iso-short');\n};\n\nvar format_1 = printFormat;\nvar pad = fns.zeroPad;\nvar formatTimezone = fns.formatTimezone; //parse this insane unix-time-templating thing, from the 19th century\n//http://unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns\n//time-symbols we support\n\nvar mapping = {\n  G: function G(s) {\n    return s.era();\n  },\n  GG: function GG(s) {\n    return s.era();\n  },\n  GGG: function GGG(s) {\n    return s.era();\n  },\n  GGGG: function GGGG(s) {\n    return s.era() === 'AD' ? 'Anno Domini' : 'Before Christ';\n  },\n  //year\n  y: function y(s) {\n    return s.year();\n  },\n  yy: function yy(s) {\n    //last two chars\n    return parseInt(String(s.year()).substr(2, 4), 10);\n  },\n  yyy: function yyy(s) {\n    return s.year();\n  },\n  yyyy: function yyyy(s) {\n    return s.year();\n  },\n  yyyyy: function yyyyy(s) {\n    return '0' + s.year();\n  },\n  // u: (s) => {},//extended non-gregorian years\n  //quarter\n  Q: function Q(s) {\n    return s.quarter();\n  },\n  QQ: function QQ(s) {\n    return s.quarter();\n  },\n  QQQ: function QQQ(s) {\n    return s.quarter();\n  },\n  QQQQ: function QQQQ(s) {\n    return s.quarter();\n  },\n  //month\n  M: function M(s) {\n    return s.month() + 1;\n  },\n  MM: function MM(s) {\n    return pad(s.month() + 1);\n  },\n  MMM: function MMM(s) {\n    return s.format('month-short');\n  },\n  MMMM: function MMMM(s) {\n    return s.format('month');\n  },\n  //week\n  w: function w(s) {\n    return s.week();\n  },\n  ww: function ww(s) {\n    return pad(s.week());\n  },\n  //week of month\n  // W: (s) => s.week(),\n  //date of month\n  d: function d(s) {\n    return s.date();\n  },\n  dd: function dd(s) {\n    return pad(s.date());\n  },\n  //date of year\n  D: function D(s) {\n    return s.dayOfYear();\n  },\n  DD: function DD(s) {\n    return pad(s.dayOfYear());\n  },\n  DDD: function DDD(s) {\n    return pad(s.dayOfYear(), 3);\n  },\n  // F: (s) => {},//date of week in month\n  // g: (s) => {},//modified julian day\n  //day\n  E: function E(s) {\n    return s.format('day-short');\n  },\n  EE: function EE(s) {\n    return s.format('day-short');\n  },\n  EEE: function EEE(s) {\n    return s.format('day-short');\n  },\n  EEEE: function EEEE(s) {\n    return s.format('day');\n  },\n  EEEEE: function EEEEE(s) {\n    return s.format('day')[0];\n  },\n  e: function e(s) {\n    return s.day();\n  },\n  ee: function ee(s) {\n    return s.day();\n  },\n  eee: function eee(s) {\n    return s.format('day-short');\n  },\n  eeee: function eeee(s) {\n    return s.format('day');\n  },\n  eeeee: function eeeee(s) {\n    return s.format('day')[0];\n  },\n  //am/pm\n  a: function a(s) {\n    return s.ampm().toUpperCase();\n  },\n  aa: function aa(s) {\n    return s.ampm().toUpperCase();\n  },\n  aaa: function aaa(s) {\n    return s.ampm().toUpperCase();\n  },\n  aaaa: function aaaa(s) {\n    return s.ampm().toUpperCase();\n  },\n  //hour\n  h: function h(s) {\n    return s.h12();\n  },\n  hh: function hh(s) {\n    return pad(s.h12());\n  },\n  H: function H(s) {\n    return s.hour();\n  },\n  HH: function HH(s) {\n    return pad(s.hour());\n  },\n  // j: (s) => {},//weird hour format\n  m: function m(s) {\n    return s.minute();\n  },\n  mm: function mm(s) {\n    return pad(s.minute());\n  },\n  s: function s(_s) {\n    return _s.second();\n  },\n  ss: function ss(s) {\n    return pad(s.second());\n  },\n  //milliseconds in the day\n  A: function A(s) {\n    return s.epoch - s.startOf('day').epoch;\n  },\n  //timezone\n  z: function z(s) {\n    return s.timezone().name;\n  },\n  zz: function zz(s) {\n    return s.timezone().name;\n  },\n  zzz: function zzz(s) {\n    return s.timezone().name;\n  },\n  zzzz: function zzzz(s) {\n    return s.timezone().name;\n  },\n  Z: function Z(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZ: function ZZ(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZZ: function ZZZ(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZZZ: function ZZZZ(s) {\n    return formatTimezone(s.timezone().current.offset, ':');\n  }\n};\n\nvar addAlias = function addAlias(_char, to, n) {\n  var name = _char;\n  var toName = to;\n\n  for (var i = 0; i < n; i += 1) {\n    mapping[name] = mapping[toName];\n    name += _char;\n    toName += to;\n  }\n};\n\naddAlias('q', 'Q', 4);\naddAlias('L', 'M', 4);\naddAlias('Y', 'y', 4);\naddAlias('c', 'e', 4);\naddAlias('k', 'H', 2);\naddAlias('K', 'h', 2);\naddAlias('S', 's', 2);\naddAlias('v', 'z', 4);\naddAlias('V', 'Z', 4);\n\nvar unixFmt = function unixFmt(s, str) {\n  var chars = str.split(''); //combine consecutive chars, like 'yyyy' as one.\n\n  var arr = [chars[0]];\n  var quoteOn = false;\n\n  for (var i = 1; i < chars.length; i += 1) {\n    //support quoted substrings\n    if (chars[i] === \"'\") {\n      quoteOn = !quoteOn; //support '', meaning one tick\n\n      if (quoteOn === true && chars[i + 1] && chars[i + 1] === \"'\") {\n        quoteOn = true;\n      } else {\n        continue;\n      }\n    } //merge it with the last one\n\n\n    if (quoteOn === true || chars[i] === arr[arr.length - 1][0]) {\n      arr[arr.length - 1] += chars[i];\n    } else {\n      arr.push(chars[i]);\n    }\n  }\n\n  return arr.reduce(function (txt, c) {\n    if (mapping[c] !== undefined) {\n      txt += mapping[c](s) || '';\n    } else {\n      txt += c;\n    }\n\n    return txt;\n  }, '');\n};\n\nvar unixFmt_1 = unixFmt;\nvar units$1 = ['year', 'season', 'quarter', 'month', 'week', 'day', 'quarterHour', 'hour', 'minute'];\n\nvar doUnit = function doUnit(s, k) {\n  var start = s.clone().startOf(k);\n  var end = s.clone().endOf(k);\n  var duration = end.epoch - start.epoch;\n  var percent = (s.epoch - start.epoch) / duration;\n  return parseFloat(percent.toFixed(2));\n}; //how far it is along, from 0-1\n\n\nvar progress = function progress(s, unit) {\n  if (unit) {\n    unit = fns.normalize(unit);\n    return doUnit(s, unit);\n  }\n\n  var obj = {};\n  units$1.forEach(function (k) {\n    obj[k] = doUnit(s, k);\n  });\n  return obj;\n};\n\nvar progress_1 = progress;\n\nvar nearest = function nearest(s, unit) {\n  //how far have we gone?\n  var prog = s.progress();\n  unit = fns.normalize(unit); //fix camel-case for this one\n\n  if (unit === 'quarterhour') {\n    unit = 'quarterHour';\n  }\n\n  if (prog[unit] !== undefined) {\n    // go forward one?\n    if (prog[unit] > 0.5) {\n      s = s.add(1, unit);\n    } // go to start\n\n\n    s = s.startOf(unit);\n  } else if (s.silent === false) {\n    console.warn(\"no known unit '\" + unit + \"'\");\n  }\n\n  return s;\n};\n\nvar nearest_1 = nearest; //increment until dates are the same\n\nvar climb = function climb(a, b, unit) {\n  var i = 0;\n  a = a.clone();\n\n  while (a.isBefore(b)) {\n    //do proper, expensive increment to catch all-the-tricks\n    a = a.add(1, unit);\n    i += 1;\n  } //oops, we went too-far..\n\n\n  if (a.isAfter(b, unit)) {\n    i -= 1;\n  }\n\n  return i;\n}; // do a thurough +=1 on the unit, until they match\n// for speed-reasons, only used on day, month, week.\n\n\nvar diffOne = function diffOne(a, b, unit) {\n  if (a.isBefore(b)) {\n    return climb(a, b, unit);\n  } else {\n    return climb(b, a, unit) * -1; //reverse it\n  }\n};\n\nvar one = diffOne; // 2020 - 2019 may be 1 year, or 0 years\n// - '1 year difference' means 366 days during a leap year\n\nvar fastYear = function fastYear(a, b) {\n  var years = b.year() - a.year(); // should we decrement it by 1?\n\n  a = a.year(b.year());\n\n  if (a.isAfter(b)) {\n    years -= 1;\n  }\n\n  return years;\n}; // use a waterfall-method for computing a diff of any 'pre-knowable' units\n// compute years, then compute months, etc..\n// ... then ms-math for any very-small units\n\n\nvar diff = function diff(a, b) {\n  // an hour is always the same # of milliseconds\n  // so these units can be 'pre-calculated'\n  var msDiff = b.epoch - a.epoch;\n  var obj = {\n    milliseconds: msDiff,\n    seconds: parseInt(msDiff / 1000, 10)\n  };\n  obj.minutes = parseInt(obj.seconds / 60, 10);\n  obj.hours = parseInt(obj.minutes / 60, 10); //do the year\n\n  var tmp = a.clone();\n  obj.years = fastYear(tmp, b);\n  tmp = a.add(obj.years, 'year'); //there's always 12 months in a year...\n\n  obj.months = obj.years * 12;\n  tmp = a.add(obj.months, 'month');\n  obj.months += one(tmp, b, 'month'); // there's always atleast 52 weeks in a year..\n  // (month * 4) isn't as close\n\n  obj.weeks = obj.years * 52;\n  tmp = a.add(obj.weeks, 'week');\n  obj.weeks += one(tmp, b, 'week'); // there's always atleast 7 days in a week\n\n  obj.days = obj.weeks * 7;\n  tmp = a.add(obj.days, 'day');\n  obj.days += one(tmp, b, 'day');\n  return obj;\n};\n\nvar waterfall = diff;\n\nvar reverseDiff = function reverseDiff(obj) {\n  Object.keys(obj).forEach(function (k) {\n    obj[k] *= -1;\n  });\n  return obj;\n}; // this method counts a total # of each unit, between a, b.\n// '1 month' means 28 days in february\n// '1 year' means 366 days in a leap year\n\n\nvar main = function main(a, b, unit) {\n  b = fns.beADate(b, a); //reverse values, if necessary\n\n  var reversed = false;\n\n  if (a.isAfter(b)) {\n    var tmp = a;\n    a = b;\n    b = tmp;\n    reversed = true;\n  } //compute them all (i know!)\n\n\n  var obj = waterfall(a, b);\n\n  if (reversed) {\n    obj = reverseDiff(obj);\n  } //return just the requested unit\n\n\n  if (unit) {\n    //make sure it's plural-form\n    unit = fns.normalize(unit);\n\n    if (/s$/.test(unit) !== true) {\n      unit += 's';\n    }\n\n    if (unit === 'dates') {\n      unit = 'days';\n    }\n\n    return obj[unit];\n  }\n\n  return obj;\n};\n\nvar diff$1 = main; //our conceptual 'break-points' for each unit\n\nvar qualifiers = {\n  months: {\n    almost: 10,\n    over: 4\n  },\n  days: {\n    almost: 25,\n    over: 10\n  },\n  hours: {\n    almost: 20,\n    over: 8\n  },\n  minutes: {\n    almost: 50,\n    over: 20\n  },\n  seconds: {\n    almost: 50,\n    over: 20\n  }\n}; //get number of hours/minutes... between the two dates\n\nfunction getDiff(a, b) {\n  var isBefore = a.isBefore(b);\n  var later = isBefore ? b : a;\n  var earlier = isBefore ? a : b;\n  earlier = earlier.clone();\n  var diff = {\n    years: 0,\n    months: 0,\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0\n  };\n  Object.keys(diff).forEach(function (unit) {\n    if (earlier.isSame(later, unit)) {\n      return;\n    }\n\n    var max = earlier.diff(later, unit);\n    earlier = earlier.add(max, unit);\n    diff[unit] = max;\n  }); //reverse it, if necessary\n\n  if (isBefore) {\n    Object.keys(diff).forEach(function (u) {\n      if (diff[u] !== 0) {\n        diff[u] *= -1;\n      }\n    });\n  }\n\n  return diff;\n} // Expects a plural unit arg\n\n\nfunction pluralize(value, unit) {\n  if (value === 1) {\n    unit = unit.slice(0, -1);\n  }\n\n  return value + ' ' + unit;\n} //create the human-readable diff between the two dates\n\n\nvar since = function since(start, end) {\n  end = fns.beADate(end, start);\n  var diff = getDiff(start, end);\n  var isNow = Object.keys(diff).every(function (u) {\n    return !diff[u];\n  });\n\n  if (isNow === true) {\n    return {\n      diff: diff,\n      rounded: 'now',\n      qualified: 'now',\n      precise: 'now'\n    };\n  }\n\n  var rounded;\n  var qualified;\n  var precise;\n  var englishValues = []; //go through each value and create its text-representation\n\n  Object.keys(diff).forEach(function (unit, i, units) {\n    var value = Math.abs(diff[unit]);\n\n    if (value === 0) {\n      return;\n    }\n\n    var englishValue = pluralize(value, unit);\n    englishValues.push(englishValue);\n\n    if (!rounded) {\n      rounded = qualified = englishValue;\n\n      if (i > 4) {\n        return;\n      } //is it a 'almost' something, etc?\n\n\n      var nextUnit = units[i + 1];\n      var nextValue = Math.abs(diff[nextUnit]);\n\n      if (nextValue > qualifiers[nextUnit].almost) {\n        rounded = pluralize(value + 1, unit);\n        qualified = 'almost ' + rounded;\n      } else if (nextValue > qualifiers[nextUnit].over) qualified = 'over ' + englishValue;\n    }\n  }); //make them into a string\n\n  precise = englishValues.splice(0, 2).join(', '); //handle before/after logic\n\n  if (start.isAfter(end) === true) {\n    rounded += ' ago';\n    qualified += ' ago';\n    precise += ' ago';\n  } else {\n    rounded = 'in ' + rounded;\n    qualified = 'in ' + qualified;\n    precise = 'in ' + precise;\n  }\n\n  return {\n    diff: diff,\n    rounded: rounded,\n    qualified: qualified,\n    precise: precise\n  };\n};\n\nvar since_1 = since; //https://www.timeanddate.com/calendar/aboutseasons.html\n// Spring - from March 1 to May 31;\n// Summer - from June 1 to August 31;\n// Fall (autumn) - from September 1 to November 30; and,\n// Winter - from December 1 to February 28 (February 29 in a leap year).\n\nvar seasons = {\n  north: [['spring', 2, 1], //spring march 1\n  ['summer', 5, 1], //june 1\n  ['fall', 8, 1], //sept 1\n  ['autumn', 8, 1], //sept 1\n  ['winter', 11, 1] //dec 1\n  ],\n  south: [['fall', 2, 1], //march 1\n  ['autumn', 2, 1], //march 1\n  ['winter', 5, 1], //june 1\n  ['spring', 8, 1], //sept 1\n  ['summer', 11, 1] //dec 1\n  ]\n};\nvar quarters = [null, [0, 1], //jan 1\n[3, 1], //apr 1\n[6, 1], //july 1\n[9, 1] //oct 1\n];\nvar units$2 = {\n  minute: function minute(s) {\n    walk_1(s, {\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  quarterhour: function quarterhour(s) {\n    var minute = s.minutes();\n\n    if (minute >= 45) {\n      s = s.minutes(45);\n    } else if (minute >= 30) {\n      s = s.minutes(30);\n    } else if (minute >= 15) {\n      s = s.minutes(15);\n    } else {\n      s = s.minutes(0);\n    }\n\n    walk_1(s, {\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  hour: function hour(s) {\n    walk_1(s, {\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  day: function day(s) {\n    walk_1(s, {\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  week: function week(s) {\n    var original = s.clone();\n    s = s.day(s._weekStart); //monday\n\n    if (s.isAfter(original)) {\n      s = s.subtract(1, 'week');\n    }\n\n    walk_1(s, {\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  month: function month(s) {\n    walk_1(s, {\n      date: 1,\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  quarter: function quarter(s) {\n    var q = s.quarter();\n\n    if (quarters[q]) {\n      walk_1(s, {\n        month: quarters[q][0],\n        date: quarters[q][1],\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n      });\n    }\n\n    return s;\n  },\n  season: function season(s) {\n    var current = s.season();\n    var hem = 'north';\n\n    if (s.hemisphere() === 'South') {\n      hem = 'south';\n    }\n\n    for (var i = 0; i < seasons[hem].length; i++) {\n      if (seasons[hem][i][0] === current) {\n        //winter goes between years\n        var year = s.year();\n\n        if (current === 'winter' && s.month() < 3) {\n          year -= 1;\n        }\n\n        walk_1(s, {\n          year: year,\n          month: seasons[hem][i][1],\n          date: seasons[hem][i][2],\n          hour: 0,\n          minute: 0,\n          second: 0,\n          millisecond: 0\n        });\n        return s;\n      }\n    }\n\n    return s;\n  },\n  year: function year(s) {\n    walk_1(s, {\n      month: 0,\n      date: 1,\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  decade: function decade(s) {\n    s = s.startOf('year');\n    var year = s.year();\n    var decade = parseInt(year / 10, 10) * 10;\n    s = s.year(decade);\n    return s;\n  },\n  century: function century(s) {\n    s = s.startOf('year');\n    var year = s.year(); // near 0AD goes '-1 | +1'\n\n    var decade = parseInt(year / 100, 10) * 100;\n    s = s.year(decade);\n    return s;\n  }\n};\nunits$2.date = units$2.day;\n\nvar startOf = function startOf(a, unit) {\n  var s = a.clone();\n  unit = fns.normalize(unit);\n\n  if (units$2[unit]) {\n    return units$2[unit](s);\n  }\n\n  if (unit === 'summer' || unit === 'winter') {\n    s = s.season(unit);\n    return units$2.season(s);\n  }\n\n  return s;\n}; //piggy-backs off startOf\n\n\nvar endOf = function endOf(a, unit) {\n  var s = a.clone();\n  unit = fns.normalize(unit);\n\n  if (units$2[unit]) {\n    s = units$2[unit](s);\n    s = s.add(1, unit);\n    s = s.subtract(1, 'milliseconds');\n    return s;\n  }\n\n  return s;\n};\n\nvar startOf_1 = {\n  startOf: startOf,\n  endOf: endOf\n};\n\nvar isDay = function isDay(unit) {\n  if (days[\"short\"]().find(function (s) {\n    return s === unit;\n  })) {\n    return true;\n  }\n\n  if (days[\"long\"]().find(function (s) {\n    return s === unit;\n  })) {\n    return true;\n  }\n\n  return false;\n}; // return a list of the weeks/months/days between a -> b\n// returns spacetime objects in the timezone of the input\n\n\nvar every = function every(start) {\n  var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n\n  if (!unit || !end) {\n    return [];\n  } //cleanup unit param\n\n\n  unit = fns.normalize(unit); //cleanup to param\n\n  end = start.clone().set(end); //swap them, if they're backwards\n\n  if (start.isAfter(end)) {\n    var tmp = start;\n    start = end;\n    end = tmp;\n  } //support 'every wednesday'\n\n\n  var d = start.clone();\n\n  if (isDay(unit)) {\n    d = d.next(unit);\n    unit = 'week';\n  } else {\n    d = d.next(unit);\n  } //okay, actually start doing it\n\n\n  var result = [];\n\n  while (d.isBefore(end)) {\n    result.push(d);\n    d = d.add(1, unit);\n  }\n\n  return result;\n};\n\nvar every_1 = every;\n\nvar parseDst = function parseDst(dst) {\n  if (!dst) {\n    return [];\n  }\n\n  return dst.split('->');\n};\n\nvar titleCase = function titleCase(str) {\n  str = str[0].toUpperCase() + str.substr(1);\n  str = str.replace(/\\/gmt/, '/GMT');\n  str = str.replace(/[\\/_]([a-z])/gi, function (s) {\n    return s.toUpperCase();\n  });\n  return str;\n}; //get metadata about this timezone\n\n\nvar timezone = function timezone(s) {\n  var zones = s.timezones;\n  var tz = s.tz;\n\n  if (zones.hasOwnProperty(tz) === false) {\n    tz = find(s.tz, zones);\n  }\n\n  if (tz === null) {\n    if (s.silent === false) {\n      console.warn(\"Warn: could not find given or local timezone - '\" + s.tz + \"'\");\n    }\n\n    return {\n      current: {\n        epochShift: 0\n      }\n    };\n  }\n\n  var found = zones[tz];\n  var result = {\n    name: titleCase(tz),\n    hasDst: Boolean(found.dst),\n    default_offset: found.offset,\n    //do north-hemisphere version as default (sorry!)\n    hemisphere: found.hem === 's' ? 'South' : 'North',\n    current: {}\n  };\n\n  if (result.hasDst) {\n    var arr = parseDst(found.dst);\n    result.change = {\n      start: arr[0],\n      back: arr[1]\n    };\n  } //find the offsets for summer/winter times\n  //(these variable names are north-centric)\n\n\n  var summer = found.offset; // (july)\n\n  var winter = summer; // (january) assume it's the same for now\n\n  if (result.hasDst === true) {\n    if (result.hemisphere === 'North') {\n      winter = summer - 1;\n    } else {\n      //southern hemisphere\n      winter = found.offset + 1;\n    }\n  } //find out which offset to use right now\n  //use 'summer' time july-time\n\n\n  if (result.hasDst === false) {\n    result.current.offset = summer;\n    result.current.isDST = false;\n  } else if (summerTime(s.epoch, result.change.start, result.change.back, summer, winter) === true) {\n    result.current.offset = summer;\n    result.current.isDST = result.hemisphere === 'North'; //dst 'on' in winter in north\n  } else {\n    //use 'winter' january-time\n    result.current.offset = winter;\n    result.current.isDST = result.hemisphere === 'South'; //dst 'on' in summer in south\n  }\n\n  return result;\n};\n\nvar timezone_1 = timezone;\nvar units$3 = ['century', 'decade', 'year', 'month', 'date', 'day', 'hour', 'minute', 'second', 'millisecond']; //the spacetime instance methods (also, the API)\n\nvar methods = {\n  set: function set(input$1, tz) {\n    var s = this.clone();\n    s = input(s, input$1, null);\n\n    if (tz) {\n      this.tz = find(tz);\n    }\n\n    return s;\n  },\n  timezone: function timezone() {\n    return timezone_1(this);\n  },\n  isDST: function isDST() {\n    return timezone_1(this).current.isDST;\n  },\n  hasDST: function hasDST() {\n    return timezone_1(this).hasDst;\n  },\n  offset: function offset() {\n    return timezone_1(this).current.offset * 60;\n  },\n  hemisphere: function hemisphere() {\n    return timezone_1(this).hemisphere;\n  },\n  format: function format(fmt) {\n    return format_1(this, fmt);\n  },\n  unixFmt: function unixFmt(fmt) {\n    return unixFmt_1(this, fmt);\n  },\n  startOf: function startOf(unit) {\n    return startOf_1.startOf(this, unit);\n  },\n  endOf: function endOf(unit) {\n    return startOf_1.endOf(this, unit);\n  },\n  leapYear: function leapYear() {\n    var year = this.year();\n    return fns.isLeapYear(year);\n  },\n  progress: function progress(unit) {\n    return progress_1(this, unit);\n  },\n  nearest: function nearest(unit) {\n    return nearest_1(this, unit);\n  },\n  diff: function diff(d, unit) {\n    return diff$1(this, d, unit);\n  },\n  since: function since(d) {\n    if (!d) {\n      d = this.clone().set();\n    }\n\n    return since_1(this, d);\n  },\n  next: function next(unit) {\n    var s = this.add(1, unit);\n    return s.startOf(unit);\n  },\n  //the start of the previous year/week/century\n  last: function last(unit) {\n    var s = this.subtract(1, unit);\n    return s.startOf(unit);\n  },\n  isValid: function isValid() {\n    //null/undefined epochs\n    if (!this.epoch && this.epoch !== 0) {\n      return false;\n    }\n\n    return !isNaN(this.d.getTime());\n  },\n  //travel to this timezone\n  \"goto\": function goto(tz) {\n    var s = this.clone();\n    s.tz = find(tz, s.timezones); //science!\n\n    return s;\n  },\n  //get each week/month/day between a -> b\n  every: function every(unit, to) {\n    return every_1(this, unit, to);\n  },\n  isAwake: function isAwake() {\n    var hour = this.hour(); //10pm -> 8am\n\n    if (hour < 8 || hour > 22) {\n      return false;\n    }\n\n    return true;\n  },\n  isAsleep: function isAsleep() {\n    return !this.isAwake();\n  },\n  //pretty-printing\n  log: function log() {\n    console.log('');\n    console.log(format_1(this, 'nice-short'));\n    return this;\n  },\n  logYear: function logYear() {\n    console.log('');\n    console.log(format_1(this, 'full-short'));\n    return this;\n  },\n  json: function json() {\n    var _this = this;\n\n    return units$3.reduce(function (h, unit) {\n      h[unit] = _this[unit]();\n      return h;\n    }, {});\n  },\n  debug: function debug() {\n    var tz = this.timezone();\n    var date = this.format('MM') + ' ' + this.format('date-ordinal') + ' ' + this.year();\n    date += '\\n     - ' + this.format('time');\n    console.log('\\n\\n', date + '\\n     - ' + tz.name + ' (' + tz.current.offset + ')');\n    return this;\n  },\n  //alias of 'since' but opposite - like moment.js\n  from: function from(d) {\n    d = this.clone().set(d);\n    return d.since(this);\n  },\n  fromNow: function fromNow() {\n    var d = this.clone().set(Date.now());\n    return d.since(this);\n  },\n  weekStart: function weekStart(input) {\n    //accept a number directly\n    if (typeof input === 'number') {\n      this._weekStart = input;\n      return this;\n    }\n\n    if (typeof input === 'string') {\n      // accept 'wednesday'\n      input = input.toLowerCase().trim();\n      var num = days[\"short\"]().indexOf(input);\n\n      if (num === -1) {\n        num = days[\"long\"]().indexOf(input);\n      }\n\n      if (num === -1) {\n        num = 1; //go back to default\n      }\n\n      this._weekStart = num;\n    } else {\n      console.warn('Spacetime Error: Cannot understand .weekStart() input:', input);\n    }\n\n    return this;\n  }\n}; // aliases\n\nmethods.inDST = methods.isDST;\nmethods.round = methods.nearest;\nmethods.each = methods.every;\nvar methods_1 = methods; //these methods wrap around them.\n\nvar isLeapYear$1 = fns.isLeapYear;\n\nvar validate = function validate(n) {\n  //handle number as a string\n  if (typeof n === 'string') {\n    n = parseInt(n, 10);\n  }\n\n  return n;\n};\n\nvar order = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond']; //reduce hostile micro-changes when moving dates by millisecond\n\nvar confirm = function confirm(s, tmp, unit) {\n  var n = order.indexOf(unit);\n  var arr = order.slice(n, order.length);\n\n  for (var i = 0; i < arr.length; i++) {\n    var want = tmp[arr[i]]();\n    s[arr[i]](want);\n  }\n\n  return s;\n};\n\nvar set = {\n  milliseconds: function milliseconds(s, n) {\n    n = validate(n);\n    var current = s.millisecond();\n    var diff = current - n; //milliseconds to shift by\n\n    return s.epoch - diff;\n  },\n  seconds: function seconds(s, n) {\n    n = validate(n);\n    var diff = s.second() - n;\n    var shift = diff * milliseconds.second;\n    return s.epoch - shift;\n  },\n  minutes: function minutes(s, n) {\n    n = validate(n);\n    var old = s.clone();\n    var diff = s.minute() - n;\n    var shift = diff * milliseconds.minute;\n    s.epoch -= shift; // check against a screw-up\n    // if (old.hour() != s.hour()) {\n    //   walkTo(old, {\n    //     minute: n\n    //   })\n    //   return old.epoch\n    // }\n\n    confirm(s, old, 'second');\n    return s.epoch;\n  },\n  hours: function hours(s, n) {\n    n = validate(n);\n\n    if (n >= 24) {\n      n = 24;\n    } else if (n < 0) {\n      n = 0;\n    }\n\n    var old = s.clone();\n    var diff = s.hour() - n;\n    var shift = diff * milliseconds.hour;\n    s.epoch -= shift; // oops, did we change the day?\n\n    if (s.date() !== old.date()) {\n      s = old.clone();\n\n      if (diff > 1) {\n        diff -= 1;\n      }\n\n      if (diff < 1) {\n        diff += 1;\n      }\n\n      shift = diff * milliseconds.hour;\n      s.epoch -= shift;\n    }\n\n    walk_1(s, {\n      hour: n\n    });\n    confirm(s, old, 'minute');\n    return s.epoch;\n  },\n  //support setting time by '4:25pm' - this isn't very-well developed..\n  time: function time(s, str) {\n    var m = str.match(/([0-9]{1,2})[:h]([0-9]{1,2})(:[0-9]{1,2})? ?(am|pm)?/);\n\n    if (!m) {\n      //fallback to support just '2am'\n      m = str.match(/([0-9]{1,2}) ?(am|pm)/);\n\n      if (!m) {\n        return s.epoch;\n      }\n\n      m.splice(2, 0, '0'); //add implicit 0 minutes\n\n      m.splice(3, 0, ''); //add implicit seconds\n    }\n\n    var h24 = false;\n    var hour = parseInt(m[1], 10);\n    var minute = parseInt(m[2], 10);\n\n    if (hour > 12) {\n      h24 = true;\n    } //make the hour into proper 24h time\n\n\n    if (h24 === false) {\n      if (m[4] === 'am' && hour === 12) {\n        //12am is midnight\n        hour = 0;\n      }\n\n      if (m[4] === 'pm' && hour < 12) {\n        //12pm is noon\n        hour += 12;\n      }\n    } // handle seconds\n\n\n    m[3] = m[3] || '';\n    m[3] = m[3].replace(/:/, '');\n    var sec = parseInt(m[3], 10) || 0;\n    s = s.hour(hour);\n    s = s.minute(minute);\n    s = s.second(sec);\n    s = s.millisecond(0);\n    return s.epoch;\n  },\n  date: function date(s, n) {\n    n = validate(n); //avoid setting february 31st\n\n    if (n > 28) {\n      var month = s.month();\n      var max = monthLengths_1[month]; // support leap day in february\n\n      if (month === 1 && n === 29 && isLeapYear$1(s.year())) {\n        max = 29;\n      }\n\n      if (n > max) {\n        n = max;\n      }\n    } //avoid setting < 0\n\n\n    if (n <= 0) {\n      n = 1;\n    }\n\n    walk_1(s, {\n      date: n\n    });\n    return s.epoch;\n  },\n  //this one's tricky\n  month: function month(s, n) {\n    if (typeof n === 'string') {\n      n = months.mapping()[n.toLowerCase()];\n    }\n\n    n = validate(n); //don't go past december\n\n    if (n >= 12) {\n      n = 11;\n    }\n\n    if (n <= 0) {\n      n = 0;\n    }\n\n    var date = s.date(); //there's no 30th of february, etc.\n\n    if (date > monthLengths_1[n]) {\n      //make it as close as we can..\n      date = monthLengths_1[n];\n    }\n\n    walk_1(s, {\n      month: n,\n      date: date\n    });\n    return s.epoch;\n  },\n  year: function year(s, n) {\n    // support '97\n    if (typeof n === 'string' && /^'[0-9]{2}$/.test(n)) {\n      n = n.replace(/'/, '').trim();\n      n = Number(n); // '89 is 1989\n\n      if (n > 30) {\n        //change this in 10y\n        n = 1900 + n;\n      } else {\n        // '12 is 2012\n        n = 2000 + n;\n      }\n    }\n\n    n = validate(n);\n    walk_1(s, {\n      year: n\n    });\n    return s.epoch;\n  },\n  dayOfYear: function dayOfYear(s, n) {\n    n = validate(n);\n    var old = s.clone();\n    n -= 1; //days are 1-based\n\n    if (n <= 0) {\n      n = 0;\n    } else if (n >= 365) {\n      n = 364;\n    }\n\n    s = s.startOf('year');\n    s = s.add(n, 'day');\n    confirm(s, old, 'hour');\n    return s.epoch;\n  }\n};\nvar methods$1 = {\n  millisecond: function millisecond(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.milliseconds(s, num);\n      return s;\n    }\n\n    return this.d.getMilliseconds();\n  },\n  second: function second(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.seconds(s, num);\n      return s;\n    }\n\n    return this.d.getSeconds();\n  },\n  minute: function minute(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.minutes(s, num);\n      return s;\n    }\n\n    return this.d.getMinutes();\n  },\n  hour: function hour(num) {\n    var d = this.d;\n\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.hours(s, num);\n      return s;\n    }\n\n    return d.getHours();\n  },\n  //'3:30' is 3.5\n  hourFloat: function hourFloat(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n\n      var _minute = num % 1;\n\n      _minute = _minute * 60;\n\n      var _hour = parseInt(num, 10);\n\n      s.epoch = set.hours(s, _hour);\n      s.epoch = set.minutes(s, _minute);\n      return s;\n    }\n\n    var d = this.d;\n    var hour = d.getHours();\n    var minute = d.getMinutes();\n    minute = minute / 60;\n    return hour + minute;\n  },\n  // hour in 12h format\n  hour12: function hour12(str) {\n    var d = this.d;\n\n    if (str !== undefined) {\n      var s = this.clone();\n      str = '' + str;\n      var m = str.match(/^([0-9]+)(am|pm)$/);\n\n      if (m) {\n        var hour = parseInt(m[1], 10);\n\n        if (m[2] === 'pm') {\n          hour += 12;\n        }\n\n        s.epoch = set.hours(s, hour);\n      }\n\n      return s;\n    } //get the hour\n\n\n    var hour12 = d.getHours();\n\n    if (hour12 > 12) {\n      hour12 = hour12 - 12;\n    }\n\n    if (hour12 === 0) {\n      hour12 = 12;\n    }\n\n    return hour12;\n  },\n  //some ambiguity here with 12/24h\n  time: function time(str) {\n    if (str !== undefined) {\n      var s = this.clone();\n      str = str.toLowerCase().trim();\n      s.epoch = set.time(s, str);\n      return s;\n    }\n\n    return \"\".concat(this.h12(), \":\").concat(fns.zeroPad(this.minute())).concat(this.ampm());\n  },\n  // either 'am' or 'pm'\n  ampm: function ampm(input) {\n    var which = 'am';\n    var hour = this.hour();\n\n    if (hour >= 12) {\n      which = 'pm';\n    }\n\n    if (typeof input !== 'string') {\n      return which;\n    } //okay, we're doing a setter\n\n\n    var s = this.clone();\n    input = input.toLowerCase().trim(); //ampm should never change the day\n    // - so use `.hour(n)` instead of `.minus(12,'hour')`\n\n    if (hour >= 12 && input === 'am') {\n      //noon is 12pm\n      hour -= 12;\n      return s.hour(hour);\n    }\n\n    if (hour < 12 && input === 'pm') {\n      hour += 12;\n      return s.hour(hour);\n    }\n\n    return s;\n  },\n  //some hard-coded times of day, like 'noon'\n  dayTime: function dayTime(str) {\n    if (str !== undefined) {\n      var times = {\n        morning: '7:00am',\n        breakfast: '7:00am',\n        noon: '12:00am',\n        lunch: '12:00pm',\n        afternoon: '2:00pm',\n        evening: '6:00pm',\n        dinner: '6:00pm',\n        night: '11:00pm',\n        midnight: '23:59pm'\n      };\n      var s = this.clone();\n      str = str || '';\n      str = str.toLowerCase();\n\n      if (times.hasOwnProperty(str) === true) {\n        s = s.time(times[str]);\n      }\n\n      return s;\n    }\n\n    var h = this.hour();\n\n    if (h < 6) {\n      return 'night';\n    }\n\n    if (h < 12) {\n      //until noon\n      return 'morning';\n    }\n\n    if (h < 17) {\n      //until 5pm\n      return 'afternoon';\n    }\n\n    if (h < 22) {\n      //until 10pm\n      return 'evening';\n    }\n\n    return 'night';\n  },\n  //parse a proper iso string\n  iso: function iso(num) {\n    if (num !== undefined) {\n      return this.set(num);\n    }\n\n    return this.format('iso');\n  }\n};\nvar _01Time = methods$1;\nvar methods$2 = {\n  // # day in the month\n  date: function date(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.date(s, num);\n      return s;\n    }\n\n    return this.d.getDate();\n  },\n  //like 'wednesday' (hard!)\n  day: function day(input) {\n    if (input === undefined) {\n      return this.d.getDay();\n    }\n\n    var original = this.clone();\n    var want = input; // accept 'wednesday'\n\n    if (typeof input === 'string') {\n      input = input.toLowerCase();\n\n      if (days.aliases.hasOwnProperty(input)) {\n        want = days.aliases[input];\n      } else {\n        want = days[\"short\"]().indexOf(input);\n\n        if (want === -1) {\n          want = days[\"long\"]().indexOf(input);\n        }\n      }\n    } //move approx\n\n\n    var day = this.d.getDay();\n    var diff = day - want;\n    var s = this.subtract(diff, 'days'); //tighten it back up\n\n    walk_1(s, {\n      hour: original.hour(),\n      minute: original.minute(),\n      second: original.second()\n    });\n    return s;\n  },\n  //these are helpful name-wrappers\n  dayName: function dayName(input) {\n    if (input === undefined) {\n      return days[\"long\"]()[this.day()];\n    }\n\n    var s = this.clone();\n    s = s.day(input);\n    return s;\n  },\n  //either name or number\n  month: function month(input) {\n    if (input !== undefined) {\n      var s = this.clone();\n      s.epoch = set.month(s, input);\n      return s;\n    }\n\n    return this.d.getMonth();\n  }\n};\nvar _02Date = methods$2;\n\nvar clearMinutes = function clearMinutes(s) {\n  s = s.minute(0);\n  s = s.second(0);\n  s = s.millisecond(1);\n  return s;\n};\n\nvar methods$3 = {\n  // day 0-366\n  dayOfYear: function dayOfYear(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.dayOfYear(s, num);\n      return s;\n    } //days since newyears - jan 1st is 1, jan 2nd is 2...\n\n\n    var sum = 0;\n    var month = this.d.getMonth();\n    var tmp; //count the num days in each month\n\n    for (var i = 1; i <= month; i++) {\n      tmp = new Date();\n      tmp.setDate(1);\n      tmp.setFullYear(this.d.getFullYear()); //the year matters, because leap-years\n\n      tmp.setHours(1);\n      tmp.setMinutes(1);\n      tmp.setMonth(i);\n      tmp.setHours(-2); //the last day of the month\n\n      sum += tmp.getDate();\n    }\n\n    return sum + this.d.getDate();\n  },\n  //since the start of the year\n  week: function week(num) {\n    // week-setter\n    if (num !== undefined) {\n      var s = this.clone();\n      s = s.month(0);\n      s = s.date(1);\n      s = s.day('monday');\n      s = clearMinutes(s); //first week starts first Thurs in Jan\n      // so mon dec 28th is 1st week\n      // so mon dec 29th is not the week\n\n      if (s.monthName() === 'december' && s.date() >= 28) {\n        s = s.add(1, 'week');\n      }\n\n      num -= 1; //1-based\n\n      s = s.add(num, 'weeks');\n      return s;\n    } //find-out which week it is\n\n\n    var tmp = this.clone();\n    tmp = tmp.month(0);\n    tmp = tmp.date(1);\n    tmp = clearMinutes(tmp);\n    tmp = tmp.day('monday'); //don't go into last-year\n\n    if (tmp.monthName() === 'december' && tmp.date() >= 28) {\n      tmp = tmp.add(1, 'week');\n    } // is first monday the 1st?\n\n\n    var toAdd = 1;\n\n    if (tmp.date() === 1) {\n      toAdd = 0;\n    }\n\n    tmp = tmp.minus(1, 'second');\n    var thisOne = this.epoch; //if the week technically hasn't started yet\n\n    if (tmp.epoch > thisOne) {\n      return 1;\n    } //speed it up, if we can\n\n\n    var i = 0;\n    var skipWeeks = this.month() * 4;\n    tmp.epoch += milliseconds.week * skipWeeks;\n    i += skipWeeks;\n\n    for (; i < 52; i++) {\n      if (tmp.epoch > thisOne) {\n        return i + toAdd;\n      }\n\n      tmp = tmp.add(1, 'week');\n    }\n\n    return 52;\n  },\n  //'january'\n  monthName: function monthName(input) {\n    if (input === undefined) {\n      return months[\"long\"]()[this.month()];\n    }\n\n    var s = this.clone();\n    s = s.month(input);\n    return s;\n  },\n  //q1, q2, q3, q4\n  quarter: function quarter(num) {\n    if (num !== undefined) {\n      if (typeof num === 'string') {\n        num = num.replace(/^q/i, '');\n        num = parseInt(num, 10);\n      }\n\n      if (quarters[num]) {\n        var s = this.clone();\n        var _month = quarters[num][0];\n        s = s.month(_month);\n        s = s.date(1);\n        s = s.startOf('day');\n        return s;\n      }\n    }\n\n    var month = this.d.getMonth();\n\n    for (var i = 1; i < quarters.length; i++) {\n      if (month < quarters[i][0]) {\n        return i - 1;\n      }\n    }\n\n    return 4;\n  },\n  //spring, summer, winter, fall\n  season: function season(input) {\n    var hem = 'north';\n\n    if (this.hemisphere() === 'South') {\n      hem = 'south';\n    }\n\n    if (input !== undefined) {\n      var s = this.clone();\n\n      for (var i = 0; i < seasons[hem].length; i++) {\n        if (input === seasons[hem][i][0]) {\n          s = s.month(seasons[hem][i][1]);\n          s = s.date(1);\n          s = s.startOf('day');\n        }\n      }\n\n      return s;\n    }\n\n    var month = this.d.getMonth();\n\n    for (var _i = 0; _i < seasons[hem].length - 1; _i++) {\n      if (month >= seasons[hem][_i][1] && month < seasons[hem][_i + 1][1]) {\n        return seasons[hem][_i][0];\n      }\n    }\n\n    return 'winter';\n  },\n  //the year number\n  year: function year(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.year(s, num);\n      return s;\n    }\n\n    return this.d.getFullYear();\n  },\n  //bc/ad years\n  era: function era(str) {\n    if (str !== undefined) {\n      var s = this.clone();\n      str = str.toLowerCase(); //TODO: there is no year-0AD i think. may have off-by-1 error here\n\n      var year = s.d.getFullYear(); //make '1992' into 1992bc..\n\n      if (str === 'bc' && year > 0) {\n        s.epoch = set.year(s, year * -1);\n      } //make '1992bc' into '1992'\n\n\n      if (str === 'ad' && year < 0) {\n        s.epoch = set.year(s, year * -1);\n      }\n\n      return s;\n    }\n\n    if (this.d.getFullYear() < 0) {\n      return 'BC';\n    }\n\n    return 'AD';\n  },\n  // 2019 -> 2010\n  decade: function decade(input) {\n    if (input !== undefined) {\n      input = String(input);\n      input = input.replace(/([0-9])'?s$/, '$1'); //1950's\n\n      input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n      if (!input) {\n        console.warn('Spacetime: Invalid decade input');\n        return this;\n      } // assume 20th century?? for '70s'.\n\n\n      if (input.length === 2 && /[0-9][0-9]/.test(input)) {\n        input = '19' + input;\n      }\n\n      var year = Number(input);\n\n      if (isNaN(year)) {\n        return this;\n      } // round it down to the decade\n\n\n      year = Math.floor(year / 10) * 10;\n      return this.year(year); //.startOf('decade')\n    }\n\n    return this.startOf('decade').year();\n  },\n  // 1950 -> 19+1\n  century: function century(input) {\n    if (input !== undefined) {\n      if (typeof input === 'string') {\n        input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n        input = input.replace(/([0-9]+) ?(b\\.?c\\.?|a\\.?d\\.?)/i, function (a, b, c) {\n          if (c.match(/b\\.?c\\.?/i)) {\n            b = '-' + b;\n          }\n\n          return b;\n        });\n        input = input.replace(/c$/, ''); //20thC\n      }\n\n      var year = Number(input);\n\n      if (isNaN(input)) {\n        console.warn('Spacetime: Invalid century input');\n        return this;\n      } // there is no century 0\n\n\n      if (year === 0) {\n        year = 1;\n      }\n\n      if (year >= 0) {\n        year = (year - 1) * 100;\n      } else {\n        year = (year + 1) * 100;\n      }\n\n      return this.year(year);\n    } // century getter\n\n\n    var num = this.startOf('century').year();\n    num = Math.floor(num / 100);\n\n    if (num < 0) {\n      return num - 1;\n    }\n\n    return num + 1;\n  },\n  // 2019 -> 2+1\n  millenium: function millenium(input) {\n    if (input !== undefined) {\n      if (typeof input === 'string') {\n        input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n        input = Number(input);\n\n        if (isNaN(input)) {\n          console.warn('Spacetime: Invalid millenium input');\n          return this;\n        }\n      }\n\n      if (input > 0) {\n        input -= 1;\n      }\n\n      var year = input * 1000; // there is no year 0\n\n      if (year === 0) {\n        year = 1;\n      }\n\n      return this.year(year);\n    } // get the current millenium\n\n\n    var num = Math.floor(this.year() / 1000);\n\n    if (num >= 0) {\n      num += 1;\n    }\n\n    return num;\n  }\n};\nvar _03Year = methods$3;\nvar methods$4 = Object.assign({}, _01Time, _02Date, _03Year); //aliases\n\nmethods$4.milliseconds = methods$4.millisecond;\nmethods$4.seconds = methods$4.second;\nmethods$4.minutes = methods$4.minute;\nmethods$4.hours = methods$4.hour;\nmethods$4.hour24 = methods$4.hour;\nmethods$4.h12 = methods$4.hour12;\nmethods$4.h24 = methods$4.hour24;\nmethods$4.days = methods$4.day;\n\nvar addMethods = function addMethods(Space) {\n  //hook the methods into prototype\n  Object.keys(methods$4).forEach(function (k) {\n    Space.prototype[k] = methods$4[k];\n  });\n};\n\nvar query = addMethods;\nvar isLeapYear$2 = fns.isLeapYear;\n\nvar getMonthLength = function getMonthLength(month, year) {\n  if (month === 1 && isLeapYear$2(year)) {\n    return 29;\n  }\n\n  return monthLengths_1[month];\n}; //month is the one thing we 'model/compute'\n//- because ms-shifting can be off by enough\n\n\nvar rollMonth = function rollMonth(want, old) {\n  //increment year\n  if (want.month > 0) {\n    var years = parseInt(want.month / 12, 10);\n    want.year = old.year() + years;\n    want.month = want.month % 12;\n  } else if (want.month < 0) {\n    //decrement year\n    var _years = Math.floor(Math.abs(want.month) / 13, 10);\n\n    _years = Math.abs(_years) + 1;\n    want.year = old.year() - _years; //ignore extras\n\n    want.month = want.month % 12;\n    want.month = want.month + 12;\n\n    if (want.month === 12) {\n      want.month = 0;\n    }\n  }\n\n  return want;\n}; // briefly support day=-2 (this does not need to be perfect.)\n\n\nvar rollDaysDown = function rollDaysDown(want, old, sum) {\n  want.year = old.year();\n  want.month = old.month();\n  var date = old.date();\n  want.date = date - Math.abs(sum);\n\n  while (want.date < 1) {\n    want.month -= 1;\n\n    if (want.month < 0) {\n      want.month = 11;\n      want.year -= 1;\n    }\n\n    var max = getMonthLength(want.month, want.year);\n    want.date += max;\n  }\n\n  return want;\n}; // briefly support day=33 (this does not need to be perfect.)\n\n\nvar rollDaysUp = function rollDaysUp(want, old, sum) {\n  var year = old.year();\n  var month = old.month();\n  var max = getMonthLength(month, year);\n\n  while (sum > max) {\n    sum -= max;\n    month += 1;\n\n    if (month >= 12) {\n      month -= 12;\n      year += 1;\n    }\n\n    max = getMonthLength(month, year);\n  }\n\n  want.month = month;\n  want.date = sum;\n  return want;\n};\n\nvar _model = {\n  months: rollMonth,\n  days: rollDaysUp,\n  daysBack: rollDaysDown\n}; // but briefly:\n// millisecond-math, and some post-processing covers most-things\n// we 'model' the calendar here only a little bit\n// and that usually works-out...\n\nvar order$1 = ['millisecond', 'second', 'minute', 'hour', 'date', 'month'];\nvar keep = {\n  second: order$1.slice(0, 1),\n  minute: order$1.slice(0, 2),\n  quarterhour: order$1.slice(0, 2),\n  hour: order$1.slice(0, 3),\n  date: order$1.slice(0, 4),\n  month: order$1.slice(0, 4),\n  quarter: order$1.slice(0, 4),\n  season: order$1.slice(0, 4),\n  year: order$1,\n  decade: order$1,\n  century: order$1\n};\nkeep.week = keep.hour;\nkeep.season = keep.date;\nkeep.quarter = keep.date; // Units need to be dst adjuested\n\nvar dstAwareUnits = {\n  year: true,\n  quarter: true,\n  season: true,\n  month: true,\n  week: true,\n  day: true\n};\nvar keepDate = {\n  month: true,\n  quarter: true,\n  season: true,\n  year: true\n};\n\nvar addMethods$1 = function addMethods(SpaceTime) {\n  SpaceTime.prototype.add = function (num, unit) {\n    var s = this.clone();\n\n    if (!unit || num === 0) {\n      return s; //don't bother\n    }\n\n    var old = this.clone();\n    unit = fns.normalize(unit); // support 'fortnight' alias\n\n    if (unit === 'fortnight') {\n      num *= 2;\n      unit = 'week';\n    } //move forward by the estimated milliseconds (rough)\n\n\n    if (milliseconds[unit]) {\n      s.epoch += milliseconds[unit] * num;\n    } else if (unit === 'week') {\n      s.epoch += milliseconds.day * (num * 7);\n    } else if (unit === 'quarter' || unit === 'season') {\n      s.epoch += milliseconds.month * (num * 3);\n    } else if (unit === 'season') {\n      s.epoch += milliseconds.month * (num * 3);\n    } else if (unit === 'quarterhour') {\n      s.epoch += milliseconds.minute * 15 * num;\n    } //now ensure our milliseconds/etc are in-line\n\n\n    var want = {};\n\n    if (keep[unit]) {\n      keep[unit].forEach(function (u) {\n        want[u] = old[u]();\n      });\n    }\n\n    if (dstAwareUnits[unit]) {\n      var diff = old.timezone().current.offset - s.timezone().current.offset;\n      s.epoch += diff * 3600 * 1000;\n    } //ensure month/year has ticked-over\n\n\n    if (unit === 'month') {\n      want.month = old.month() + num; //month is the one unit we 'model' directly\n\n      want = _model.months(want, old);\n    } //support coercing a week, too\n\n\n    if (unit === 'week') {\n      var sum = old.date() + num * 7;\n\n      if (sum <= 28 && sum > 1) {\n        want.date = sum;\n      }\n    } //support 25-hour day-changes on dst-changes\n    else if (unit === 'date') {\n        if (num < 0) {\n          want = _model.daysBack(want, old, num);\n        } else {\n          //specify a naive date number, if it's easy to do...\n          var _sum = old.date() + num; // ok, model this one too\n\n\n          want = _model.days(want, old, _sum);\n        } //manually punt it if we haven't moved at all..\n\n\n        if (num !== 0 && old.isSame(s, 'day')) {\n          want.date = old.date() + num;\n        }\n      } //ensure year has changed (leap-years)\n      else if (unit === 'year') {\n          var wantYear = old.year() + num;\n          var haveYear = s.year();\n\n          if (haveYear < wantYear) {\n            s.epoch += milliseconds.day;\n          } else if (haveYear > wantYear) {\n            s.epoch += milliseconds.day;\n          }\n        } //these are easier\n        else if (unit === 'decade') {\n            want.year = s.year() + 10;\n          } else if (unit === 'century') {\n            want.year = s.year() + 100;\n          } //keep current date, unless the month doesn't have it.\n\n\n    if (keepDate[unit]) {\n      var max = monthLengths_1[want.month];\n      want.date = old.date();\n\n      if (want.date > max) {\n        want.date = max;\n      }\n    }\n\n    walk_1(s, want);\n    return s;\n  }; //subtract is only add *-1\n\n\n  SpaceTime.prototype.subtract = function (num, unit) {\n    var s = this.clone();\n    return s.add(num * -1, unit);\n  }; //add aliases\n\n\n  SpaceTime.prototype.minus = SpaceTime.prototype.subtract;\n  SpaceTime.prototype.plus = SpaceTime.prototype.add;\n};\n\nvar add = addMethods$1; //make a string, for easy comparison between dates\n\nvar print = {\n  millisecond: function millisecond(s) {\n    return s.epoch;\n  },\n  second: function second(s) {\n    return [s.year(), s.month(), s.date(), s.hour(), s.minute(), s.second()].join('-');\n  },\n  minute: function minute(s) {\n    return [s.year(), s.month(), s.date(), s.hour(), s.minute()].join('-');\n  },\n  hour: function hour(s) {\n    return [s.year(), s.month(), s.date(), s.hour()].join('-');\n  },\n  day: function day(s) {\n    return [s.year(), s.month(), s.date()].join('-');\n  },\n  week: function week(s) {\n    return [s.year(), s.week()].join('-');\n  },\n  month: function month(s) {\n    return [s.year(), s.month()].join('-');\n  },\n  quarter: function quarter(s) {\n    return [s.year(), s.quarter()].join('-');\n  },\n  year: function year(s) {\n    return s.year();\n  }\n};\nprint.date = print.day;\n\nvar addMethods$2 = function addMethods(SpaceTime) {\n  SpaceTime.prototype.isSame = function (b, unit) {\n    var tzAware = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var a = this;\n\n    if (!unit) {\n      return null;\n    }\n\n    if (typeof b === 'string' || typeof b === 'number') {\n      b = new SpaceTime(b, this.timezone.name);\n    } //support 'seconds' aswell as 'second'\n\n\n    unit = unit.replace(/s$/, ''); // make them the same timezone for proper comparison\n\n    if (tzAware === true && a.tz !== b.tz) {\n      b = b.clone();\n      b.tz = a.tz;\n    }\n\n    if (print[unit]) {\n      return print[unit](a) === print[unit](b);\n    }\n\n    return null;\n  };\n};\n\nvar same = addMethods$2;\n\nvar addMethods$3 = function addMethods(SpaceTime) {\n  var methods = {\n    isAfter: function isAfter(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch > epoch;\n    },\n    isBefore: function isBefore(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch < epoch;\n    },\n    isEqual: function isEqual(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch === epoch;\n    },\n    isBetween: function isBetween(start, end) {\n      var isInclusive = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      start = fns.beADate(start, this);\n      end = fns.beADate(end, this);\n      var startEpoch = fns.getEpoch(start);\n\n      if (startEpoch === null) {\n        return null;\n      }\n\n      var endEpoch = fns.getEpoch(end);\n\n      if (endEpoch === null) {\n        return null;\n      }\n\n      if (isInclusive) {\n        return this.isBetween(start, end) || this.isEqual(start) || this.isEqual(end);\n      }\n\n      return startEpoch < this.epoch && this.epoch < endEpoch;\n    }\n  }; //hook them into proto\n\n  Object.keys(methods).forEach(function (k) {\n    SpaceTime.prototype[k] = methods[k];\n  });\n};\n\nvar compare = addMethods$3;\n\nvar addMethods$4 = function addMethods(SpaceTime) {\n  var methods = {\n    i18n: function i18n(data) {\n      //change the day names\n      if (fns.isObject(data.days)) {\n        days.set(data.days);\n      } //change the month names\n\n\n      if (fns.isObject(data.months)) {\n        months.set(data.months);\n      }\n    }\n  }; //hook them into proto\n\n  Object.keys(methods).forEach(function (k) {\n    SpaceTime.prototype[k] = methods[k];\n  });\n};\n\nvar i18n = addMethods$4;\nvar timezones = unpack; //fake timezone-support, for fakers (es5 class)\n\nvar SpaceTime = function SpaceTime(input$1, tz) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}; //the holy moment\n\n  this.epoch = null; //the shift for the given timezone\n\n  this.tz = find(tz, timezones); //whether to output warnings to console\n\n  this.silent = options.silent || true; // favour british interpretation of 02/02/2018, etc\n\n  this.british = options.dmy || options.british; //does the week start on sunday, or monday:\n\n  this._weekStart = 1; //default to monday\n\n  if (options.weekStart !== undefined) {\n    this._weekStart = options.weekStart;\n  } // the reference today date object, (for testing)\n\n\n  this._today = {};\n\n  if (options.today !== undefined) {\n    this._today = options.today;\n  } //add getter/setters\n\n\n  Object.defineProperty(this, 'd', {\n    //return a js date object\n    get: function get() {\n      var offset = quick(this); //every computer is somewhere- get this computer's built-in offset\n\n      var bias = new Date(this.epoch).getTimezoneOffset() || 0; //movement\n\n      var shift = bias + offset * 60; //in minutes\n\n      shift = shift * 60 * 1000; //in ms\n      //remove this computer's offset\n\n      var epoch = this.epoch + shift;\n      var d = new Date(epoch);\n      return d;\n    }\n  }); //add this data on the object, to allow adding new timezones\n\n  Object.defineProperty(this, 'timezones', {\n    get: function get() {\n      return timezones;\n    },\n    set: function set(obj) {\n      timezones = obj;\n      return obj;\n    }\n  }); //parse the various formats\n\n  var tmp = input(this, input$1, tz);\n  this.epoch = tmp.epoch;\n}; //(add instance methods to prototype)\n\n\nObject.keys(methods_1).forEach(function (k) {\n  SpaceTime.prototype[k] = methods_1[k];\n}); // ¯\\_(ツ)_/¯\n\nSpaceTime.prototype.clone = function () {\n  return new SpaceTime(this.epoch, this.tz, {\n    silent: this.silent,\n    weekStart: this._weekStart,\n    today: this._today\n  });\n}; //return native date object at the same epoch\n\n\nSpaceTime.prototype.toLocalDate = function () {\n  return new Date(this.epoch);\n}; //append more methods\n\n\nquery(SpaceTime);\nadd(SpaceTime);\nsame(SpaceTime);\ncompare(SpaceTime);\ni18n(SpaceTime);\nvar spacetime = SpaceTime;\n\nvar whereIts = function whereIts(a, b) {\n  var start = new spacetime(null);\n  var end = new spacetime(null);\n  start = start.time(a); //if b is undefined, use as 'within one hour'\n\n  if (b) {\n    end = end.time(b);\n  } else {\n    end = start.add(59, 'minutes');\n  }\n\n  var startHour = start.hour();\n  var endHour = end.hour();\n  var tzs = Object.keys(start.timezones).filter(function (tz) {\n    if (tz.indexOf('/') === -1) {\n      return false;\n    }\n\n    var m = new spacetime(null, tz);\n    var hour = m.hour(); //do 'calendar-compare' not real-time-compare\n\n    if (hour >= startHour && hour <= endHour) {\n      //test minutes too, if applicable\n      if (hour === startHour && m.minute() < start.minute()) {\n        return false;\n      }\n\n      if (hour === endHour && m.minute() > end.minute()) {\n        return false;\n      }\n\n      return true;\n    }\n\n    return false;\n  });\n  return tzs;\n};\n\nvar whereIts_1 = whereIts;\nvar _version = '6.12.1';\n\nvar main$1 = function main(input, tz, options) {\n  return new spacetime(input, tz, options);\n}; // set all properties of a given 'today' object\n\n\nvar setToday = function setToday(s) {\n  var today = s._today || {};\n  Object.keys(today).forEach(function (k) {\n    s = s[k](today[k]);\n  });\n  return s;\n}; //some helper functions on the main method\n\n\nmain$1.now = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  s = setToday(s);\n  return s;\n};\n\nmain$1.today = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  s = setToday(s);\n  return s.startOf('day');\n};\n\nmain$1.tomorrow = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  s = setToday(s);\n  return s.add(1, 'day').startOf('day');\n};\n\nmain$1.yesterday = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  s = setToday(s);\n  return s.subtract(1, 'day').startOf('day');\n};\n\nmain$1.extend = function (obj) {\n  Object.keys(obj).forEach(function (k) {\n    spacetime.prototype[k] = obj[k];\n  });\n  return this;\n}; //find tz by time\n\n\nmain$1.whereIts = whereIts_1;\nmain$1.version = _version; //aliases:\n\nmain$1.plugin = main$1.extend;\nvar src = main$1;\nexport default src;","import React, { useEffect, useCallback, useState } from 'react'\r\nimport cookie from 'js-cookie'\r\nimport { useLoads } from 'react-loads'\r\nimport spacetime from 'spacetime'\r\n\r\nimport { useStore } from 'src/context/siteContext'\r\n\r\nexport const Orders = () => {\r\n  const {customerToken} = useStore()\r\n  const [orders, setOrders] = useState([])\r\n  const handleOrders = useCallback(\r\n    (token) =>\r\n      fetch(`/.netlify/functions/orders`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          token\r\n        }),\r\n      })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n          if (res.error) {\r\n            throw new Error(res.error.message)\r\n          } else {\r\n            console.log(res)\r\n            if (res.customer.orders.edges) {\r\n              setOrders(res.customer.orders.edges)\r\n            }\r\n            return null\r\n          }\r\n        }),\r\n    []\r\n  )\r\n\r\n  const { error, isRejected, isPending, isReloading, load } = useLoads(\r\n    'handleOrders',\r\n    handleOrders as any,\r\n    {\r\n      defer: true,\r\n    }\r\n  )\r\n\r\n  useEffect(() => {\r\n    const token = customerToken || cookie.get('customer_token')\r\n    if (token) {\r\n      load(token)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className='container--m mxa x'>\r\n      <h2 className='mb0 pb0'>Orders</h2>\r\n      <div className='x al mya'>\r\n        {(isPending ||\r\n          isReloading) && (\r\n          <span>Loading</span>\r\n        )}\r\n\r\n        {isRejected && (\r\n          <div className='mt1 error'>\r\n            <span role='img' aria-label='error'>\r\n              ⚠️\r\n            </span>\r\n            : {error.message}\r\n          </div>\r\n        )}\r\n\r\n        {orders.length > 0 ? (\r\n          <div>\r\n            <div className='x accounts__orders-wrapper'>\r\n              {orders.map(order => (\r\n                <div key={order.node.orderNumber} className='x bct py1 f jcb aic'>\r\n                  <div className='al'>\r\n                    <h3 className='m0 p0'>{order.node.orderNumber}</h3>\r\n                    <span>Processed: {spacetime(order.node.processedAt).unixFmt('dd.MM.yyyy')}</span>\r\n                  </div>\r\n                  <div className='ar'>\r\n                    <h5 className='m0 p0'>${order.node.totalPrice}</h5>\r\n                    <a href={order.node.statusUrl} target='_blank' rel='noopener noreferrer'>Order Status</a>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <p>Sorry you don't have any orders yet!</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\nimport { navigate } from 'gatsby'\r\nimport cookie from 'js-cookie'\r\nimport fetch from 'unfetch'\r\n\r\nimport { setCustomerInState, useStore } from 'src/context/siteContext'\r\nimport { Orders } from 'src/components/auth/orders'\r\n\r\nconst logout = (e: React.MouseEvent<HTMLAnchorElement>, updateCustomer: any) => {\r\n  e.preventDefault()\r\n  const customerToken = cookie.get('customer_token')\r\n  fetch(`/.netlify/functions/logout`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      accessToken: customerToken\r\n    })\r\n  })\r\n  .then(() => {\r\n    cookie.remove('customer_token')\r\n    cookie.remove('customer_email')\r\n    cookie.remove('customer_firstName')\r\n    setTimeout(() => {\r\n      updateCustomer()\r\n    }, 300)\r\n    setTimeout(() => {\r\n      navigate('/')\r\n    }, 500)\r\n  })\r\n}\r\n\r\nexport const Portal = () => {\r\n  const updateCustomerInState = setCustomerInState()\r\n  const { customerToken } = useStore()\r\n  return (\r\n    <div className='container--l mxa p1 ac'>\r\n      <h1>Account Portal</h1>\r\n      <a href=\"#logout\" onClick={e => logout(e, updateCustomerInState)}>Logout</a>\r\n      <div className='x al mt1'>\r\n        {customerToken && (\r\n          <Orders />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { Router } from '@reach/router'\r\n\r\nimport AuthWrapper from 'src/components/auth/authWrapper'\r\n// @ts-ignore\r\nimport Activate from 'src/components/auth/activate'\r\n\r\nimport { ForgotPassword } from 'src/components/auth/forgotPassword'\r\nimport { Register } from 'src/components/auth/register'\r\nimport { Login } from 'src/components/auth/login'\r\nimport { Reset } from 'src/components/auth/reset'\r\nimport { InvalidToken } from '../components/auth/invalid_token'\r\nimport { Portal } from '../components/auth/portal'\r\n\r\nconst Account = ({\r\n  pageContext\r\n}: {\r\n  pageContext: {}\r\n}) => {\r\n  return (\r\n    <div id='account__container' className='container--1000 mxa outer p2 site'>\r\n      <Router>\r\n        <PublicRoute path='/account'>\r\n          <AuthWrapper path='/' component={Portal} />\r\n          <Reset path='/reset/:id/:token' />\r\n          <Login path='/login' />\r\n          <Activate\r\n            // @ts-ignore\r\n            path='/activate/:id/:token'\r\n          />\r\n          <InvalidToken path='/invalid_token' />\r\n          <Register path='/register' />\r\n          <ForgotPassword path='/forgot' />\r\n        </PublicRoute>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction PublicRoute(props: { children: React.ReactNode; path: string }) {\r\n  return <div>{props.children}</div>\r\n}\r\n\r\nexport default Account\r\n"],"sourceRoot":""}